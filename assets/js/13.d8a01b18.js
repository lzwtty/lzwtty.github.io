(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{595:function(t,s,n){"use strict";n.r(s);var a=n(15),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[n("strong",[t._v("GDB调试手册")])]),t._v(" "),n("p",[n("strong",[t._v("目录")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#0-%E7%94%A8gdb%E8%B0%83%E8%AF%95%E7%A8%8B%E5%BA%8F"}},[t._v("0 用GDB调试程序")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#01gdb%E6%A6%82%E8%BF%B0"}},[t._v("0.1 GDB概述")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#02-%E8%B0%83%E8%AF%95%E7%A4%BA%E4%BE%8B"}},[t._v("0.2 调试示例")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#021-%E6%BA%90%E4%BB%A3%E7%A0%81test1c"}},[t._v("0.2.1 源代码test1.c")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#022-%E8%B0%83%E8%AF%95%E8%BF%87%E7%A8%8B"}},[t._v("0.2.2 调试过程")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#03-%E4%BD%BF%E7%94%A8gdb"}},[t._v("0.3 使用GDB")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#031-%E5%90%AF%E5%8A%A8gdb"}},[t._v("0.3.1 启动GDB")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#032gdb%E7%8E%AF%E5%A2%83%E4%B8%AD%E4%BD%BF%E7%94%A8shell%E5%91%BD%E4%BB%A4"}},[t._v("0.3.2 GDB环境中使用shell命令")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#033-%E5%9C%A8gdb%E4%B8%AD%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F"}},[t._v("0.3.3 在GDB中运行程序")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#1-%E8%AE%BE%E7%BD%AE%E6%96%AD%E7%82%B9"}},[t._v("1 设置断点")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#11-%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4"}},[t._v("1.1 使用命令")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#12-%E7%A4%BA%E4%BE%8B"}},[t._v("1.2 示例")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#121-%E8%B0%83%E8%AF%95%E8%BF%87%E7%A8%8B"}},[t._v("1.2.1 调试过程")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#2-%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%8D%95%E6%AD%A5%E6%89%A7%E8%A1%8C"}},[t._v("2 程序的单步执行")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#21-%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4"}},[t._v("2.1 使用命令")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#22-%E7%A4%BA%E4%BE%8B"}},[t._v("2.2 示例")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#221-%E8%B0%83%E8%AF%95%E8%BF%87%E7%A8%8B"}},[t._v("2.2.1 调试过程")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#3-%E6%98%BE%E7%A4%BA%E4%BF%AE%E6%94%B9%E5%8F%98%E9%87%8F%E7%9A%84%E5%80%BC"}},[t._v("3 显示/修改变量的值")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#31%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4"}},[t._v("3.1使用命令")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#32%E7%A4%BA%E4%BE%8B"}},[t._v("3.2示例")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#321-%E6%BA%90%E4%BB%A3%E7%A0%81test2c"}},[t._v("3.2.1 源代码test2.c")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#322-%E8%B0%83%E8%AF%95%E8%BF%87%E7%A8%8B"}},[t._v("3.2.2 调试过程")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#4-%E7%9B%91%E8%A7%86%E7%A8%8B%E5%BA%8F%E5%8F%98%E9%87%8F%E5%80%BC"}},[t._v("4 监视程序变量值")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#41-%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4"}},[t._v("4.1 使用命令")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#42-%E7%A4%BA%E4%BE%8B"}},[t._v("4.2 示例")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#421-%E8%B0%83%E8%AF%95%E8%BF%87%E7%A8%8B"}},[t._v("4.2.1 调试过程")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#5-%E6%98%BE%E7%A4%BA%E4%BF%AE%E6%94%B9%E5%AF%84%E5%AD%98%E5%99%A8"}},[t._v("5 显示/修改寄存器")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#51-%E8%83%8C%E6%99%AF%E7%9F%A5%E8%AF%86"}},[t._v("5.1 背景知识")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#52-%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4"}},[t._v("5.2 使用命令")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#53-%E7%A4%BA%E4%BE%8B"}},[t._v("5.3 示例")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#521-%E8%B0%83%E8%AF%95%E8%BF%87%E7%A8%8B"}},[t._v("5.2.1 调试过程")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#6-%E6%9F%A5%E7%9C%8B%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%A0%86%E6%A0%88"}},[t._v("6 查看程序的堆栈")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#61-%E8%83%8C%E6%99%AF%E7%9F%A5%E8%AF%86"}},[t._v("6.1 背景知识")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#62-%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4"}},[t._v("6.2 使用命令")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#63-%E7%A4%BA%E4%BE%8B"}},[t._v("6.3 示例")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#631-%E6%BA%90%E4%BB%A3%E7%A0%81test3c"}},[t._v("6.3.1 源代码test3.c")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#632-%E8%B0%83%E8%AF%95%E8%BF%87%E7%A8%8B"}},[t._v("6.3.2 调试过程")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#7-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%B0%83%E8%AF%95"}},[t._v("7 多线程调试")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#71-%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4"}},[t._v("7.1 使用命令")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#72-%E7%A4%BA%E4%BE%8B"}},[t._v("7.2 示例")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#721-%E6%BA%90%E4%BB%A3%E7%A0%81test4c"}},[t._v("7.2.1 源代码test4.c")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#722-%E8%B0%83%E8%AF%95%E8%BF%87%E7%A8%8B"}},[t._v("7.2.2 调试过程")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#8-%E6%AD%BB%E9%94%81%E8%B0%83%E8%AF%95"}},[t._v("8 死锁调试")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#81-%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4"}},[t._v("8.1 使用命令")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#82-%E7%A4%BA%E4%BE%8B"}},[t._v("8.2 示例")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#821-%E6%BA%90%E6%96%87%E4%BB%B6test5c"}},[t._v("8.2.1 源文件test5.c")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#822-%E8%B0%83%E8%AF%95%E8%BF%87%E7%A8%8B"}},[t._v("8.2.2 调试过程")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#9-core%E6%96%87%E4%BB%B6%E8%B0%83%E8%AF%95"}},[t._v("9 core文件调试")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#91-%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4"}},[t._v("9.1 使用命令")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#92-%E7%A4%BA%E4%BE%8B"}},[t._v("9.2 示例")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#921-%E6%BA%90%E4%BB%A3%E7%A0%81test6c"}},[t._v("9.2.1 源代码test6.c")])]),t._v(" "),n("p",[n("a",{attrs:{href:"#922-%E8%B0%83%E8%AF%95%E8%BF%87%E7%A8%8B"}},[t._v("9.2.2 调试过程")])]),t._v(" "),n("h1",{attrs:{id:"_0-用gdb调试程序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0-用gdb调试程序"}},[t._v("#")]),t._v(" 0 用GDB调试程序")]),t._v(" "),n("h2",{attrs:{id:"_0-1-gdb概述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0-1-gdb概述"}},[t._v("#")]),t._v(" 0.1 GDB概述")]),t._v(" "),n("p",[t._v("GDB是GNU开源组织发布的一个强大的UNIX下的程序调试工具。或许，各位比较喜欢那种图形界面方式的，像VC、BCB等IDE的调试，但如果你是在UNIX平台下做软件，你会发现GDB这个调试工具有比VC、BCB的图形化调试器更强大的功能。所谓“寸有所长，尺有所短”就是这个道理。")]),t._v(" "),n("p",[t._v("一般来说，GDB主要帮忙你完成下面四个方面的功能：")]),t._v(" "),n("p",[t._v("1、启动你的程序，可以按照你的自定义的要求随心所欲的运行程序。")]),t._v(" "),n("p",[t._v("2、调试的程序在你所指定的断点处停住。（断点可以是条件表达式）")]),t._v(" "),n("p",[t._v("3、程序被停住时，可以检查此时你的程序中所发生的事。")]),t._v(" "),n("p",[t._v("4、动态的改变你程序的执行环境。")]),t._v(" "),n("p",[t._v("从上面看来，GDB和一般的调试工具没有什么两样，基本上也是完成这些功能，不过在细节上，你会发现GDB这个调试工具的强大，大家可能比较习惯了图形化的调试工具，但有时候，命令行的调试工具却有着图形化工具所不能完成的功能。让我们一一看来。")]),t._v(" "),n("h2",{attrs:{id:"_0-2-调试示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0-2-调试示例"}},[t._v("#")]),t._v(" 0.2 调试示例")]),t._v(" "),n("h3",{attrs:{id:"_0-2-1-源代码test1-c"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0-2-1-源代码test1-c"}},[t._v("#")]),t._v(" 0.2.1 源代码test1.c")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.")]),t._v("#include "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("stdio"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("h"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" sum"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("     \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.")]),t._v("        sum"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("     \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" sum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("11.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13.")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("14.")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("15.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" j "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("19.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" m "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("p "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("21.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("22.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("     \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("23.")]),t._v("        result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("24.")]),t._v("             \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("25.")]),t._v("        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("j"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("26.")]),t._v("        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("     \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("27.")]),t._v("            m"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("28.")]),t._v("        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("     \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("29.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("     \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("30.")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("31.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result[1-100] = %d \\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result[1-250] = %d \\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("250")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("33.")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("34.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("35.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br")])]),n("h3",{attrs:{id:"_0-2-2-调试过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0-2-2-调试过程"}},[t._v("#")]),t._v(" 0.2.2 调试过程")]),t._v(" "),n("p",[t._v("编译生成执行文件：")]),t._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("root@luo:~/workspace/test/ exec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("gcc -g test1.c -o test1\n使用GDB调试：\nroot@luo:~/workspace/test/exec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("gdb test1-------------- 启动GDB\nGNU gdb "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Wind River Linux Sourcery CodeBench "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.8")]),t._v("-45"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.6")]),t._v("\nCopyright "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("C"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2013")]),t._v(" Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" or later "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("http://gnu.org/licenses/gpl.html"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nThis is "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" software: you are "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"show copying"')]),t._v("\nand "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"show warranty"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" details.\nThis GDB was configured as "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"x86_64-wrs-linux-gnu"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\nFor bug reporting instructions, please see:\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("support@windriver.com"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nReading symbols from /home/luo/workspace/test/exec/test1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".done.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" l "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("-------------- 从第一行开始列出源码，l为list缩写\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#include <stdio.h>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\t\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\tint func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("int n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\t\tint "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(",i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\t\tfor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\t\t\t"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -------------- 直接回车表示重复上一次命令\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v("\t\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v("\t\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v("\tint main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("\t\tint i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v("\t\tint j "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\t\tint result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v("\t\tint m "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\t\tint *p "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(" -------------- 设置断点，在源程序第16行\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" at 0x400566: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" test1.c, line "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" func -------------- 设置断点，在func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("函数入口处\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" at 0x400537: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" test1.c, line "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" info "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" -------------- 显示断点信息\nNum     Type           Disp Enb Address            What\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("       breakpoint     keep y   0x0000000000400566 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" main at test1.c:16\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("       breakpoint     keep y   0x0000000000400537 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" func at test1.c:5\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" r -------------- 运行程序，r为run简写\nStarting program: /home/luo/workspace/test/exec/test1 \nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test1.c:16\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("\t\tint i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n -------------- 单条语句执行，next命令简写\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v("\t\tint j "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\t\tint result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v("\t\tint m "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\t\tint *p "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行程序，continue命令简写\nContinuing.\nresult"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("-100"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" -------------- 程序输出\n\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(", func "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("250")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test1.c:5\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\t\tint "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(",i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\t\tfor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\t\t\t"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" p i -------------- 打印变量i的值，p为print命令简写\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\t\tfor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\t\t\t"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" p "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\t\tfor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" p i\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$3")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\t\t\t"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\t\tfor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" p "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$4")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" bt -------------- 查看函数堆栈\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0  func (n=250) at test1.c:6")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1  0x00000000004005dd in main () at test1.c:32")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" finish -------------- 退出函数\nRun till "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v(" from "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0  func (n=250) at test1.c:6")]),t._v("\n0x00000000004005dd "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test1.c:32\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),t._v("\t\tprintf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result[1-250] = %d '),n("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v(", func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("250")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nValue returned is "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$5")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("31125")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行\nContinuing.\nresult"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("-250"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("31125")]),t._v(" -------------- 程序输出\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Inferior "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("46602")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" exited normally"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ------------ 程序退出，调试结束\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" q -------------- 退出GDB\nroot@luo:~/workspace/test/exec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br"),n("span",{staticClass:"line-number"},[t._v("66")]),n("br"),n("span",{staticClass:"line-number"},[t._v("67")]),n("br"),n("span",{staticClass:"line-number"},[t._v("68")]),n("br"),n("span",{staticClass:"line-number"},[t._v("69")]),n("br"),n("span",{staticClass:"line-number"},[t._v("70")]),n("br"),n("span",{staticClass:"line-number"},[t._v("71")]),n("br"),n("span",{staticClass:"line-number"},[t._v("72")]),n("br"),n("span",{staticClass:"line-number"},[t._v("73")]),n("br"),n("span",{staticClass:"line-number"},[t._v("74")]),n("br"),n("span",{staticClass:"line-number"},[t._v("75")]),n("br"),n("span",{staticClass:"line-number"},[t._v("76")]),n("br"),n("span",{staticClass:"line-number"},[t._v("77")]),n("br"),n("span",{staticClass:"line-number"},[t._v("78")]),n("br"),n("span",{staticClass:"line-number"},[t._v("79")]),n("br"),n("span",{staticClass:"line-number"},[t._v("80")]),n("br"),n("span",{staticClass:"line-number"},[t._v("81")]),n("br"),n("span",{staticClass:"line-number"},[t._v("82")]),n("br"),n("span",{staticClass:"line-number"},[t._v("83")]),n("br"),n("span",{staticClass:"line-number"},[t._v("84")]),n("br"),n("span",{staticClass:"line-number"},[t._v("85")]),n("br"),n("span",{staticClass:"line-number"},[t._v("86")]),n("br"),n("span",{staticClass:"line-number"},[t._v("87")]),n("br"),n("span",{staticClass:"line-number"},[t._v("88")]),n("br"),n("span",{staticClass:"line-number"},[t._v("89")]),n("br"),n("span",{staticClass:"line-number"},[t._v("90")]),n("br"),n("span",{staticClass:"line-number"},[t._v("91")]),n("br"),n("span",{staticClass:"line-number"},[t._v("92")]),n("br"),n("span",{staticClass:"line-number"},[t._v("93")]),n("br"),n("span",{staticClass:"line-number"},[t._v("94")]),n("br"),n("span",{staticClass:"line-number"},[t._v("95")]),n("br"),n("span",{staticClass:"line-number"},[t._v("96")]),n("br"),n("span",{staticClass:"line-number"},[t._v("97")]),n("br")])]),n("h2",{attrs:{id:"_0-3-使用gdb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0-3-使用gdb"}},[t._v("#")]),t._v(" 0.3 使用GDB")]),t._v(" "),n("p",[t._v("一般来说GDB主要调试的是C/C++的程序。要调试C/C++的程序，首先在编译时，我们必须要把调试信息加到可执行文件中。使用编译器（cc/gcc/g++）的 -g 参数可以做到这一点。如：")]),t._v(" "),n("p",[t._v("> cc -g hello.c -o hello")]),t._v(" "),n("p",[t._v("> g++ -g hello.cpp -o hello")]),t._v(" "),n("p",[t._v("如果没有-g，你将看不见程序的函数名、变量名，所代替的全是运行时的内存地址。当你用-g把调试信息加入之后，并成功编译目标代码以后，让我们来看看如何用gdb来调试他。")]),t._v(" "),n("h3",{attrs:{id:"_0-3-1-启动gdb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0-3-1-启动gdb"}},[t._v("#")]),t._v(" 0.3.1 启动GDB")]),t._v(" "),n("p",[t._v("启动GDB的方法有以下几种：")]),t._v(" "),n("p",[t._v("1、gdb <program>")]),t._v(" "),n("p",[t._v("program也就是你的执行文件，一般在当然目录下。")]),t._v(" "),n("p",[t._v("2、gdb <program> core")]),t._v(" "),n("p",[t._v("用gdb同时调试一个运行程序和core文件，core是程序非法执行后core dump后产生的文件。")]),t._v(" "),n("p",[t._v("3、gdb <program> <PID>")]),t._v(" "),n("p",[t._v("如果你的程序是一个服务程序，那么你可以指定这个服务程序运行时的进程ID。gdb会自动attach上去，并调试他。program应该在PATH环境变量中搜索得到。")]),t._v(" "),n("p",[t._v("GDB启动时，可以加上一些GDB的启动开关，详细的开关可以用gdb -help查看。下面只例举一些比较常用的参数：")]),t._v(" "),n("p",[t._v("-symbols <file>")]),t._v(" "),n("p",[t._v("-s <file>")]),t._v(" "),n("p",[t._v("从指定文件中读取符号表。")]),t._v(" "),n("p",[t._v("-se file")]),t._v(" "),n("p",[t._v("指定文件中读取符号表信息，并把他用在可执行文件中。")]),t._v(" "),n("p",[t._v("-core <file>")]),t._v(" "),n("p",[t._v("-c <file>")]),t._v(" "),n("p",[t._v("调试时core dump的core文件。")]),t._v(" "),n("p",[t._v("-directory <directory>")]),t._v(" "),n("p",[t._v("-d <directory>")]),t._v(" "),n("p",[t._v("加入一个源文件的搜索路径。默认搜索路径是环境变量中PATH所定义的路径。")]),t._v(" "),n("h3",{attrs:{id:"_0-3-2-gdb环境中使用shell命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0-3-2-gdb环境中使用shell命令"}},[t._v("#")]),t._v(" 0.3.2 GDB环境中使用shell命令")]),t._v(" "),n("p",[t._v("在gdb环境中，你可以执行UNIX的shell的命令，使用gdb的shell命令来完成：")]),t._v(" "),n("p",[n("strong",[t._v("shell <command string>")])]),t._v(" "),n("p",[t._v("调用UNIX的shell来执行<command string>，环境变量SHELL中定义的UNIX的shell将会被用来执行<command string>，如果SHELL没有定义，那就使用UNIX的标准shell：/bin/sh。（在Windows中使用Command.com或cmd.exe）")]),t._v(" "),n("p",[t._v("还有一个gdb命令是make：")]),t._v(" "),n("p",[n("strong",[t._v("make <make-args>")])]),t._v(" "),n("p",[t._v("可以在gdb中执行make命令来重新build自己的程序。这个命令等价于“shell make <make-args>”。")]),t._v(" "),n("h3",{attrs:{id:"_0-3-3-在gdb中运行程序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0-3-3-在gdb中运行程序"}},[t._v("#")]),t._v(" 0.3.3 在GDB中运行程序")]),t._v(" "),n("p",[t._v("当以gdb <program>方式启动gdb后，gdb会在PATH路径和当前目录中搜索<program>的源文件。如要确认gdb是否读到源文件，可使用l或list命令，看看gdb是否能列出源代码。")]),t._v(" "),n("p",[t._v("在gdb中，运行程序使用r或是run命令。程序的运行，你有可能需要设置下面四方面的事。")]),t._v(" "),n("p",[t._v("1、程序运行参数。")]),t._v(" "),n("p",[t._v("set args 可指定运行时参数。（如：set args 10 20 30 40 50）")]),t._v(" "),n("p",[t._v("show args 命令可以查看设置好的运行参数。")]),t._v(" "),n("p",[t._v("2、运行环境。")]),t._v(" "),n("p",[t._v("path <dir> 可设定程序的运行路径。")]),t._v(" "),n("p",[t._v("show paths 查看程序的运行路径。")]),t._v(" "),n("p",[t._v("set environment varname [=value] 设置环境变量。如：set env USER=aaa")]),t._v(" "),n("p",[t._v("show environment [varname] 查看环境变量。")]),t._v(" "),n("p",[t._v("3、工作目录。")]),t._v(" "),n("p",[t._v("cd <dir> 相当于shell的cd命令。")]),t._v(" "),n("p",[t._v("pwd 显示当前的所在目录。")]),t._v(" "),n("p",[t._v("4、程序的输入输出。")]),t._v(" "),n("p",[t._v("info terminal 显示你程序用到的终端的模式。")]),t._v(" "),n("p",[t._v("使用重定向控制程序输出。如：run > outfile")]),t._v(" "),n("p",[t._v("tty命令可以指写输入输出的终端设备。如：tty /dev/ttyb。")]),t._v(" "),n("h1",{attrs:{id:"_1-设置断点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-设置断点"}},[t._v("#")]),t._v(" 1 设置断点")]),t._v(" "),n("h2",{attrs:{id:"_1-1-使用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-使用命令"}},[t._v("#")]),t._v(" 1.1 使用命令")]),t._v(" "),n("p",[n("strong",[t._v("break linenum")])]),t._v(" "),n("p",[t._v("在指定行号设置断点。")]),t._v(" "),n("p",[n("strong",[t._v("break function")])]),t._v(" "),n("p",[t._v("在函数function的入口处设置断点。C++中可以使用class::function或function(type,type)格式来指定函数名。")]),t._v(" "),n("p",[n("strong",[t._v("break +offset/-offset")])]),t._v(" "),n("p",[t._v("在当前行前面或后面offset行设置断点，offset为自然数。")]),t._v(" "),n("p",[n("strong",[t._v("break filename:linenum")])]),t._v(" "),n("p",[t._v("在源文件filename的linenum行处设置断点。")]),t._v(" "),n("p",[n("strong",[t._v("break filename:function")])]),t._v(" "),n("p",[t._v("在源文件filename的function函数的入口处设置断点。")]),t._v(" "),n("p",[n("strong",[t._v("break")])]),t._v(" "),n("p",[t._v("break命令没有参数时，表示在下一条指令处设置断点。")]),t._v(" "),n("p",[n("strong",[t._v("break args if cond")])]),t._v(" "),n("p",[t._v("设置一个带有条件cond的断点，只有条件为“真”时才停止。args代表上述参数之一。")]),t._v(" "),n("p",[n("strong",[t._v("delete [breakpoint num]")])]),t._v(" "),n("p",[t._v("删除断点，breakpoint num为断点号。")]),t._v(" "),n("p",[n("strong",[t._v("tbreak args")])]),t._v(" "),n("p",[t._v("设置仅停止一次的断点。args与上面break命令的相同。程序在该断点停止后，该断点便立即被删除。")]),t._v(" "),n("h2",{attrs:{id:"_1-2-示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-示例"}},[t._v("#")]),t._v(" 1.2 示例")]),t._v(" "),n("p",[t._v("源代码test1.c 同上")]),t._v(" "),n("h3",{attrs:{id:"_1-2-1-调试过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-调试过程"}},[t._v("#")]),t._v(" 1.2.1 调试过程")]),t._v(" "),n("p",[t._v("编译生成可执行文件，注意要带上 "),n("em",[t._v("-g")]),t._v(" ：")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/source\\>gcc -g test.c -o ../exec/test")])]),t._v(" "),n("p",[t._v("使用GDB调试：")]),t._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("\nroot@luo:~/workspace/test/source"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("gcc -g test.c -o "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/exec/test\n使用GDB调试：\nroot@luo:~/workspace/test/exec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("gdb "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" \nGNU gdb "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Wind River Linux Sourcery CodeBench "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.8")]),t._v("-45"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.6")]),t._v("\nCopyright "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("C"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2013")]),t._v(" Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" or later "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("http://gnu.org/licenses/gpl.html"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nThis is "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" software: you are "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"show copying"')]),t._v("\nand "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"show warranty"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" details.\nThis GDB was configured as "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"x86_64-wrs-linux-gnu"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\nFor bug reporting instructions, please see:\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("support@windriver.com"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nReading symbols from /home/luo/workspace/test/exec/test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".done.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" l "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" -------------- l为list的简写，从第一行开始列出源码\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#include <stdio.h>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\t\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\tint func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("int n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\t\tint "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(",i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\t\tfor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\t\t\t"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -------------- 直接回车，表示重复上一次命令\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v("\t\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v("\t\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v("\tint main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("\t\tint i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v("\t\tint j "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\t\tint result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v("\t\tint m "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\t\tint *p "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v("\t\tfor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v("\t\t\tresult "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v("\t    \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v("\t\t\tfor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("j"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("26")]),t._v("\t\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("\t\t\t\tm++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),t._v("\t\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("29")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\t\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),t._v("\t\tprintf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result[1-100] = %d '),n("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v(", result "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),t._v("\t\tprintf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result[1-250] = %d '),n("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v(", func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("250")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("33")]),t._v("\t\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("34")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" main -------------- 设置断点，在函数main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("入口处。\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" at 0x400566: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" test.c, line "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" -------------- 设置断点，在源程序第21行\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" at 0x400585: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" test.c, line "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" test.c:func  -------------- 设置断点，在test.c文件的func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("函数入口处\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" at 0x400537: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" test.c, line "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" r -------------- 运行程序，run命令简写\nStarting program: /home/luo/workspace/test/exec/test \n\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:17 ---------- 程序在main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("入口停止\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v("\t\tint j "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行程序，continue命令的简写\nContinuing.\n\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(", main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:22 -------------- 程序在22行停止\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" tbreak "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("26")]),t._v("  -------------- 设置临时断点，在26行\nTemporary breakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" at 0x400594: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" test.c, line "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("26")]),t._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" info b -------------- 查看断点信息\nNum     Type           Disp Enb Address            What\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("       breakpoint     keep y   0x0000000000400566 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" main at test.c:17\n\tbreakpoint already hit "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("       breakpoint     keep y   0x0000000000400585 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" main at test.c:21\n\tbreakpoint already hit "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("       breakpoint     keep y   0x0000000000400537 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" func at test.c:5\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("       breakpoint     del  y   0x0000000000400594 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" main at test.c:26\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行程序\nContinuing.\n\nTemporary breakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(", main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:26  --------------程序在26行停止\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("26")]),t._v("\t\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" info b -------------- 再查看断点信息，临时断点已删除\nNum     Type           Disp Enb Address            What\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("       breakpoint     keep y   0x0000000000400566 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" main at test.c:17\n\tbreakpoint already hit "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("       breakpoint     keep y   0x0000000000400585 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" main at test.c:21\n\tbreakpoint already hit "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("       breakpoint     keep y   0x0000000000400537 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" func at test.c:5\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" m "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" ------------ 设置断点，在27行，当m"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("时生效\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" at 0x4005b1: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" test.c, line "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行程序\nContinuing.\n\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(", main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:22 ------------ 程序在22行停止\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行程序\nContinuing.\n\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(", main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:22\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行程序\nContinuing.\n\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(", main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:30 -------------- 程序在30行停止\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" print "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%d"')]),t._v(", m -------------- 打印m的值\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" -------------- 此时m "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行程序\nContinuing.\nresult"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("-100"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" \n\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(", func "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("250")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:5 ---------- 程序在func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("函数入口处停止\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\t\tint "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(",i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" tbreak +3 -------------- 在当前行+3行处设置临时断点\nTemporary breakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" at 0x400547: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" test.c, line "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行程序\nContinuing.\nTemporary breakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(", func "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("250")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:8\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\t\t\t"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" -------------- 在下一条指令处设置断点\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v(" at 0x400547: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" test.c, line "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行程序\nContinuing.\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v(", func "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("250")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:8 -------------- 在第8行停止\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\t\t\t"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行程序\nContinuing.\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v(", func "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("250")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:8 -------------- 在第8行停止\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\t\t\t"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),t._v(" --------------清楚所有断点\nDeleted breakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行程序\nContinuing.\nresult"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("-250"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("31125")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br"),n("span",{staticClass:"line-number"},[t._v("66")]),n("br"),n("span",{staticClass:"line-number"},[t._v("67")]),n("br"),n("span",{staticClass:"line-number"},[t._v("68")]),n("br"),n("span",{staticClass:"line-number"},[t._v("69")]),n("br"),n("span",{staticClass:"line-number"},[t._v("70")]),n("br"),n("span",{staticClass:"line-number"},[t._v("71")]),n("br"),n("span",{staticClass:"line-number"},[t._v("72")]),n("br"),n("span",{staticClass:"line-number"},[t._v("73")]),n("br"),n("span",{staticClass:"line-number"},[t._v("74")]),n("br"),n("span",{staticClass:"line-number"},[t._v("75")]),n("br"),n("span",{staticClass:"line-number"},[t._v("76")]),n("br"),n("span",{staticClass:"line-number"},[t._v("77")]),n("br"),n("span",{staticClass:"line-number"},[t._v("78")]),n("br"),n("span",{staticClass:"line-number"},[t._v("79")]),n("br"),n("span",{staticClass:"line-number"},[t._v("80")]),n("br"),n("span",{staticClass:"line-number"},[t._v("81")]),n("br"),n("span",{staticClass:"line-number"},[t._v("82")]),n("br"),n("span",{staticClass:"line-number"},[t._v("83")]),n("br"),n("span",{staticClass:"line-number"},[t._v("84")]),n("br"),n("span",{staticClass:"line-number"},[t._v("85")]),n("br"),n("span",{staticClass:"line-number"},[t._v("86")]),n("br"),n("span",{staticClass:"line-number"},[t._v("87")]),n("br"),n("span",{staticClass:"line-number"},[t._v("88")]),n("br"),n("span",{staticClass:"line-number"},[t._v("89")]),n("br"),n("span",{staticClass:"line-number"},[t._v("90")]),n("br"),n("span",{staticClass:"line-number"},[t._v("91")]),n("br"),n("span",{staticClass:"line-number"},[t._v("92")]),n("br"),n("span",{staticClass:"line-number"},[t._v("93")]),n("br"),n("span",{staticClass:"line-number"},[t._v("94")]),n("br"),n("span",{staticClass:"line-number"},[t._v("95")]),n("br"),n("span",{staticClass:"line-number"},[t._v("96")]),n("br"),n("span",{staticClass:"line-number"},[t._v("97")]),n("br"),n("span",{staticClass:"line-number"},[t._v("98")]),n("br"),n("span",{staticClass:"line-number"},[t._v("99")]),n("br"),n("span",{staticClass:"line-number"},[t._v("100")]),n("br"),n("span",{staticClass:"line-number"},[t._v("101")]),n("br"),n("span",{staticClass:"line-number"},[t._v("102")]),n("br"),n("span",{staticClass:"line-number"},[t._v("103")]),n("br"),n("span",{staticClass:"line-number"},[t._v("104")]),n("br"),n("span",{staticClass:"line-number"},[t._v("105")]),n("br"),n("span",{staticClass:"line-number"},[t._v("106")]),n("br"),n("span",{staticClass:"line-number"},[t._v("107")]),n("br"),n("span",{staticClass:"line-number"},[t._v("108")]),n("br"),n("span",{staticClass:"line-number"},[t._v("109")]),n("br"),n("span",{staticClass:"line-number"},[t._v("110")]),n("br"),n("span",{staticClass:"line-number"},[t._v("111")]),n("br"),n("span",{staticClass:"line-number"},[t._v("112")]),n("br"),n("span",{staticClass:"line-number"},[t._v("113")]),n("br"),n("span",{staticClass:"line-number"},[t._v("114")]),n("br"),n("span",{staticClass:"line-number"},[t._v("115")]),n("br"),n("span",{staticClass:"line-number"},[t._v("116")]),n("br"),n("span",{staticClass:"line-number"},[t._v("117")]),n("br"),n("span",{staticClass:"line-number"},[t._v("118")]),n("br"),n("span",{staticClass:"line-number"},[t._v("119")]),n("br"),n("span",{staticClass:"line-number"},[t._v("120")]),n("br"),n("span",{staticClass:"line-number"},[t._v("121")]),n("br"),n("span",{staticClass:"line-number"},[t._v("122")]),n("br"),n("span",{staticClass:"line-number"},[t._v("123")]),n("br"),n("span",{staticClass:"line-number"},[t._v("124")]),n("br"),n("span",{staticClass:"line-number"},[t._v("125")]),n("br"),n("span",{staticClass:"line-number"},[t._v("126")]),n("br"),n("span",{staticClass:"line-number"},[t._v("127")]),n("br"),n("span",{staticClass:"line-number"},[t._v("128")]),n("br"),n("span",{staticClass:"line-number"},[t._v("129")]),n("br"),n("span",{staticClass:"line-number"},[t._v("130")]),n("br"),n("span",{staticClass:"line-number"},[t._v("131")]),n("br"),n("span",{staticClass:"line-number"},[t._v("132")]),n("br"),n("span",{staticClass:"line-number"},[t._v("133")]),n("br"),n("span",{staticClass:"line-number"},[t._v("134")]),n("br"),n("span",{staticClass:"line-number"},[t._v("135")]),n("br"),n("span",{staticClass:"line-number"},[t._v("136")]),n("br"),n("span",{staticClass:"line-number"},[t._v("137")]),n("br"),n("span",{staticClass:"line-number"},[t._v("138")]),n("br")])]),n("h1",{attrs:{id:"_2-程序的单步执行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-程序的单步执行"}},[t._v("#")]),t._v(" 2 程序的单步执行")]),t._v(" "),n("h2",{attrs:{id:"_2-1-使用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-使用命令"}},[t._v("#")]),t._v(" 2.1 使用命令")]),t._v(" "),n("p",[n("strong",[t._v("step <count>")])]),t._v(" "),n("p",[t._v("单步跟踪，如果有函数调用，他会进入该函数。进入函数的前提是，此函数被编译有debug信息。后面可以加count也可以不加，不加表示一条条地执行，加表示执行后面的count条指令，然后再停住。")]),t._v(" "),n("p",[n("strong",[t._v("next <count>")])]),t._v(" "),n("p",[t._v("同样单步跟踪，如果有函数调用，他不会进入该函数。后面可以加count也可以不加，不加表示一条条地执行，加表示执行后面的count条指令，然后再停住。")]),t._v(" "),n("p",[n("strong",[t._v("finish")])]),t._v(" "),n("p",[t._v("运行程序，直到当前函数完成返回。并打印函数返回时的堆栈地址和返回值及参数值等信息。")]),t._v(" "),n("p",[n("strong",[t._v("until 或 u")])]),t._v(" "),n("p",[t._v("当你厌倦了在一个循环体内单步跟踪时，这个命令可以运行程序直到退出循环体。")]),t._v(" "),n("h2",{attrs:{id:"_2-2-示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-示例"}},[t._v("#")]),t._v(" 2.2 示例")]),t._v(" "),n("p",[t._v("源代码test1.c 同上")]),t._v(" "),n("h3",{attrs:{id:"_2-2-1-调试过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-调试过程"}},[t._v("#")]),t._v(" 2.2.1 调试过程")]),t._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("root@luo:~/workspace/test/exec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("gdb -q "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" \n----- 启动GDB，-q使启动使版本信息不显示\nReading symbols from /home/luo/workspace/test/exec/test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".done.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" -------------- 在第18行设置断点\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" at 0x400574: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" test.c, line "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" r -------------- 运行程序\nStarting program: /home/luo/workspace/test/exec/test \n\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:18 -------------- 在18行停止\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\t\tint result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n -------------- 下一条\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v("\t\tint m "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n -------------- 下一条\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\t\tint *p "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" s -------------- 下一条\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v("\t\tfor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" s -------------- 下一条\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v("\t\t\tresult "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n -------------- 下一条\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v("\t\t\tfor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("j"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n -------------- 下一条 \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("\t\t\t\tm++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" u -------------- 运行函数到退出当前循环\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v("\t\t\tfor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("j"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" u -------------- 运行程序到退出当前循环\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v("\t\tfor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" u -------------- 运行程序到退出当前循环\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),t._v("\t\tprintf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result[1-100] = %d '),n("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v(", result "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" s -------------- 下一条\nresult"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("-100"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),t._v("\t\tprintf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result[1-250] = %d '),n("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v(", func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("250")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" s -------------- step下一条\nfunc "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("250")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:5 -------------- 进入函数func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\t\tint "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(",i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" finish -------------- 运行程序到函数完成\nRun till "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v(" from "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0  func (n=250) at test.c:5")]),t._v("\n0x00000000004005dd "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:32\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),t._v("\t\tprintf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result[1-250] = %d '),n("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v(", func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("250")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nValue returned is "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("31125")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" r -------------- 再次运行程序\nThe program being debugged has been started already.\nStart it from the beginning? "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("y or n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" y\nStarting program: /home/luo/workspace/test/exec/test \nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:18 -------------- 程序在18行停止\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\t\tint result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" -------------- 设置断点，在30行\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" at 0x4005bf: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" test.c, line "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行程序\nContinuing.\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(", main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test.c:31 -------------- 程序在31行停止\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),t._v("\t\tprintf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result[1-100] = %d '),n("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v(", result "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n -------------- next下一条\nresult"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("-100"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),t._v("\t\tprintf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result[1-250] = %d '),n("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v(", func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("250")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" n -------------- next下一条\nresult"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("-250"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("31125")]),t._v("  -------------- 未进入函数func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("34")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br")])]),n("h1",{attrs:{id:"_3-显示-修改变量的值"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-显示-修改变量的值"}},[t._v("#")]),t._v(" 3 显示/修改变量的值")]),t._v(" "),n("h2",{attrs:{id:"_3-1使用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1使用命令"}},[t._v("#")]),t._v(" 3.1使用命令")]),t._v(" "),n("p",[n("strong",[t._v("print <expr>")])]),t._v(" "),n("p",[n("strong",[t._v("print /<f> <expr>")])]),t._v(" "),n("p",[t._v("当程序被停住时，可以使用print命令（简写为p），或同义命令inspect来查看当前程序的运行数据。<expr>是表达式，是你所调试的程序的语言的表达式（GDB可以调试多种编程语言），<f>是输出的格式，比如，如果要把表达式按16进制的格式输出，那么就是/x。")]),t._v(" "),n("p",[n("strong",[t._v("注意")]),t._v("：GDB中，变量分为全局变量、静态全局变量、局部变量三种，当局部变量与全局变量发生重名时，用pirnt显示出的变量的值会是函数中的局部变量的值。此时如果要查看全局变量的值，可以使用“::”操作符：")]),t._v(" "),n("p",[n("strong",[t._v("file::variable")])]),t._v(" "),n("p",[n("strong",[t._v("function::variable")])]),t._v(" "),n("p",[t._v("可以通过这种形式查看某个文件或是某个函数的变量。")]),t._v(" "),n("h2",{attrs:{id:"_3-2示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2示例"}},[t._v("#")]),t._v(" 3.2示例")]),t._v(" "),n("h3",{attrs:{id:"_3-2-1-源代码test2-c"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-源代码test2-c"}},[t._v("#")]),t._v(" 3.2.1 源代码test2.c")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.")]),t._v("#include "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("stdio"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("h"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("   \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.")]),t._v("        n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("     \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9.")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("11.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13.")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("14.")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("15.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" sum "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("19.")]),t._v("    sum "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("21.")]),t._v("        n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("22.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("     \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("23.")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("24.")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br")])]),n("h3",{attrs:{id:"_3-2-2-调试过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-调试过程"}},[t._v("#")]),t._v(" 3.2.2 调试过程")]),t._v(" "),n("p",[t._v("编译生成可执行文件：")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/source\\>gcc -g test2.c -o ../exec/test2")])]),t._v(" "),n("p",[t._v("启动GDB：")]),t._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("\nroot@luo:~/workspace/test/source"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("gcc -g test2.c -o "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/exec/test2\n启动GDB：\nroot@luo:~/workspace/test/exec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("gdb -q test2\nReading symbols from /home/luo/workspace/test/exec/test2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".done.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" l "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#include <stdio.h>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\t\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\tint func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("int m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\t\tint n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\t\tint i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\t\tfor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("\t\t\tn "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("\t\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("\t\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v("\t\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v("\tint "),n("span",{pre:!0,attrs:{class:"token function-name function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("\t\tint i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("\t\tint b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v("\t\tint n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\t\tint "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\t\tfor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v("\t\t\tn++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v("\t\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" func -------------- 设置断点，在func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("函数入口处\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" at 0x4004f7: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" test2.c, line "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" -------------- 设置断点，在21行\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" at 0x40055f: "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" test2.c, line "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" r -------------- 运行程序\nStarting program: /home/luo/workspace/test/exec/test2 \n\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", func "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test2.c:4\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\t\tint n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" p n -------------- 在func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("函数内，显示变量n的值\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" p main::n ------------ 在func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("内，显示main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("函数中n的值\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行程序\nContinuing.\n\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(", main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test2.c:21\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v("\t\t\tn++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" p n -------------- 显示n的值\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$3")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" p n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" -------------- 修改n的值为50\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$4")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" p n -------------- 显示n的值\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$5")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" c -------------- 继续运行程序\nContinuing.\n\nBreakpoint "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(", main "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" at test2.c:21\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v("\t\t\tn++"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" p n ------------ 显示n的值，可以看到，n在修改基础上加1\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$6")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("51")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" p /x n ------------ 用16进制显示n值\n"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$7")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" 0x33 \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br"),n("span",{staticClass:"line-number"},[t._v("66")]),n("br"),n("span",{staticClass:"line-number"},[t._v("67")]),n("br")])]),n("h1",{attrs:{id:"_4-监视程序变量值"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-监视程序变量值"}},[t._v("#")]),t._v(" 4 监视程序变量值")]),t._v(" "),n("h2",{attrs:{id:"_4-1-使用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-使用命令"}},[t._v("#")]),t._v(" 4.1 使用命令")]),t._v(" "),n("p",[n("strong",[t._v("display <expr>")])]),t._v(" "),n("p",[n("strong",[t._v("display/<fmt> <expr>")])]),t._v(" "),n("p",[n("strong",[t._v("display/<fmt> <addr>")])]),t._v(" "),n("p",[t._v("display命令可以设置一些自动显示的变量，当程序停住时，或是在单步跟踪时，这些变量会自动显示。expr是一个表达式，fmt表示显示的格式，addr表示内存地址，当用display设定好了一个或多个表达式后，只要程序被停下来，GDB会自动显示你所设置的这些表达式的值。")]),t._v(" "),n("p",[n("strong",[t._v("undisplay <dnums...>")])]),t._v(" "),n("p",[n("strong",[t._v("delete display <dnums...>")])]),t._v(" "),n("p",[t._v("删除自动显示，dnums意为所设置好了的自动显式的编号。如果要同时删除几个，编号可以用空格分隔，如果要删除一个范围内的编号，可以用减号表示（如：2-5）。")]),t._v(" "),n("p",[n("strong",[t._v("disable display <dnums...>")])]),t._v(" "),n("p",[n("strong",[t._v("enable display <dnums...>")])]),t._v(" "),n("p",[t._v("disable和enalbe不删除自动显示的设置，而只是让其失效和恢复。")]),t._v(" "),n("p",[n("strong",[t._v("info display")])]),t._v(" "),n("p",[t._v("查看display设置的自动显示的信息，包括设置的编号，表达式，是否enable。")]),t._v(" "),n("h2",{attrs:{id:"_4-2-示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-示例"}},[t._v("#")]),t._v(" 4.2 示例")]),t._v(" "),n("p",[t._v("源代码test2.c同上")]),t._v(" "),n("h3",{attrs:{id:"_4-2-1-调试过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-调试过程"}},[t._v("#")]),t._v(" 4.2.1 调试过程")]),t._v(" "),n("p",[t._v("启动GDB：")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>gdb -q test2")])]),t._v(" "),n("p",[n("em",[t._v("Reading symbols from /home/luo/workspace/test/exec/test2...done.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) l 1 --------------")]),t._v(" 列出源代码")]),t._v(" "),n("p",[n("em",[t._v("1 #include <stdio.h>")])]),t._v(" "),n("p",[n("em",[t._v("2")])]),t._v(" "),n("p",[n("em",[t._v("3 int func(int m){")])]),t._v(" "),n("p",[n("em",[t._v("4  int n = 0;")])]),t._v(" "),n("p",[n("em",[t._v("5  int i = 0;")])]),t._v(" "),n("p",[n("em",[t._v("6  for(i = 0; i < m; i++){")])]),t._v(" "),n("p",[n("em",[t._v("7   n += m;")])]),t._v(" "),n("p",[n("em",[t._v("8  }")])]),t._v(" "),n("p",[n("em",[t._v("9")])]),t._v(" "),n("p",[n("em",[t._v("10  return n;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v("11")])]),t._v(" "),n("p",[n("em",[t._v("12 }")])]),t._v(" "),n("p",[n("em",[t._v("13")])]),t._v(" "),n("p",[n("em",[t._v("14 int main(){")])]),t._v(" "),n("p",[n("em",[t._v("15  int i = 0;")])]),t._v(" "),n("p",[n("em",[t._v("16  int b = 0;")])]),t._v(" "),n("p",[n("em",[t._v("17  int n = 20;")])]),t._v(" "),n("p",[n("em",[t._v("18  int sum = 0;")])]),t._v(" "),n("p",[n("em",[t._v("19  sum = func(40);")])]),t._v(" "),n("p",[n("em",[t._v("20  for(i = 0; i < 10; i++){")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v("21   n++;")])]),t._v(" "),n("p",[n("em",[t._v("22  }")])]),t._v(" "),n("p",[n("em",[t._v("23")])]),t._v(" "),n("p",[n("em",[t._v("24  return 0;")])]),t._v(" "),n("p",[n("em",[t._v("25 }")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) break 21 --------------")]),t._v(" 设置断点，在21行")]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 1 at 0x40055f: file test2.c, line 21.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) r --------------")]),t._v(" 运行程序")]),t._v(" "),n("p",[n("em",[t._v("Starting program: /home/luo/workspace/test/exec/test2")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 1, main () at test2.c:21")])]),t._v(" "),n("p",[n("em",[t._v("21   n++;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) display n --------------")]),t._v(" 跟踪变量"),n("em",[t._v("n")]),t._v("的值")]),t._v(" "),n("p",[n("em",[t._v("1: n = 20")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) display i --------------")]),t._v(" 跟踪变量"),n("em",[t._v("i")]),t._v("的值")]),t._v(" "),n("p",[n("em",[t._v("2: i = 0")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) display n+i --------------")]),t._v(" 跟踪"),n("em",[t._v("n+i")]),t._v("的值")]),t._v(" "),n("p",[n("em",[t._v("3: n+i = 20")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) display/x n --------------")]),t._v(" 跟踪"),n("em",[t._v("n")]),t._v("的值，以16进制显示")]),t._v(" "),n("p",[n("em",[t._v("4: /x n = 0x14")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) display &n --------------")]),t._v(" 跟踪"),n("em",[t._v("n")]),t._v("的地址")]),t._v(" "),n("p",[n("em",[t._v("5: &n = (int *) 0x7fffffffe0a8")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) c --------------")]),t._v(" 继续运行程序")]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 1, main () at test2.c:21")])]),t._v(" "),n("p",[n("em",[t._v("21   n++;")])]),t._v(" "),n("p",[n("em",[t._v("5: &n = (int *) 0x7fffffffe0a8")])]),t._v(" "),n("p",[n("em",[t._v("4: /x n = 0x15")])]),t._v(" "),n("p",[n("em",[t._v("3: n+i = 22")])]),t._v(" "),n("p",[n("em",[t._v("2: i = 1")])]),t._v(" "),n("p",[n("em",[t._v("1: n = 21")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) delete display 4 --------------")]),t._v(" 删除4号跟踪")]),t._v(" "),n("p",[n("em",[t._v("(gdb) c --------------")]),t._v(" 继续运行程序")]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 1, main () at test2.c:21 ------------")]),t._v(" 可以看到，4号没了")]),t._v(" "),n("p",[n("em",[t._v("21   n++;")])]),t._v(" "),n("p",[n("em",[t._v("5: &n = (int *) 0x7fffffffe0a8")])]),t._v(" "),n("p",[n("em",[t._v("3: n+i = 24")])]),t._v(" "),n("p",[n("em",[t._v("2: i = 2")])]),t._v(" "),n("p",[n("em",[t._v("1: n = 22")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) disable display 5 --------------")]),t._v(" 使5号跟踪失效")]),t._v(" "),n("p",[n("em",[t._v("(gdb) c --------------")]),t._v(" 继续运行程序")]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 1, main () at test2.c:21  -------")]),t._v(" 可以看到，5号也没显示")]),t._v(" "),n("p",[n("em",[t._v("21   n++;")])]),t._v(" "),n("p",[n("em",[t._v("3: n+i = 26")])]),t._v(" "),n("p",[n("em",[t._v("2: i = 3")])]),t._v(" "),n("p",[n("em",[t._v("1: n = 23")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) enable display 5 --------------")]),t._v(" 使5号跟踪恢复")]),t._v(" "),n("p",[n("em",[t._v("(gdb) c --------------")]),t._v(" 继续运行程序")]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 1, main () at test2.c:21  ------")]),t._v(" 可以看到，5号再次显示")]),t._v(" "),n("p",[n("em",[t._v("21   n++;")])]),t._v(" "),n("p",[n("em",[t._v("5: &n = (int *) 0x7fffffffe0a8")])]),t._v(" "),n("p",[n("em",[t._v("3: n+i = 28")])]),t._v(" "),n("p",[n("em",[t._v("2: i = 4")])]),t._v(" "),n("p",[n("em",[t._v("1: n = 24")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) info display --------------")]),t._v(" 查看自动显示信息")]),t._v(" "),n("p",[n("em",[t._v("Auto-display expressions now in effect:")])]),t._v(" "),n("p",[n("em",[t._v("Num Enb Expression")])]),t._v(" "),n("p",[n("em",[t._v("5: y &n")])]),t._v(" "),n("p",[n("em",[t._v("3: y n+i")])]),t._v(" "),n("p",[n("em",[t._v("2: y i")])]),t._v(" "),n("p",[n("em",[t._v("1: y n")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) disable display 1 2 3 -----------")]),t._v(" 使1，2，3号都失效")]),t._v(" "),n("p",[n("em",[t._v("(gdb) c --------------")]),t._v(" 继续运行程序")]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 1, main () at test2.c:21")])]),t._v(" "),n("p",[n("em",[t._v("21   n++;")])]),t._v(" "),n("p",[n("em",[t._v("5: &n = (int *) 0x7fffffffe0a8")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) info display --------------")]),t._v(" 查看自动显示信息")]),t._v(" "),n("p",[n("em",[t._v("Auto-display expressions now in effect:")])]),t._v(" "),n("p",[n("em",[t._v("Num Enb Expression")])]),t._v(" "),n("p",[n("em",[t._v("5: y &n")])]),t._v(" "),n("p",[n("em",[t._v("3: n n+i")])]),t._v(" "),n("p",[n("em",[t._v("2: n i")])]),t._v(" "),n("p",[n("em",[t._v("1: n n")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("ul",[n("li"),t._v(" "),n("li")]),t._v(" "),n("h1",{attrs:{id:"_5-显示-修改寄存器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-显示-修改寄存器"}},[t._v("#")]),t._v(" 5 显示/修改寄存器")]),t._v(" "),n("h2",{attrs:{id:"_5-1-背景知识"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-背景知识"}},[t._v("#")]),t._v(" 5.1 背景知识")]),t._v(" "),n("p",[t._v("先明确一点，这里指的是通用寄存器（后简称寄存器）。既然是通用的，使用并没有限制；后面介绍寄存器使用规则或者惯例，只是GCC/G++的规则。因为我们想对GCC编译的C/C++序进行分析，所以了解这些规则就很有帮助。")]),t._v(" "),n("p",[t._v("在体系结构教科书中，寄存器通常被说成寄存器文件，其实就是CPU上的一块存储区域，不过更喜欢使用标识符来表示，而不是地址而已。")]),t._v(" "),n("p",[t._v("X86-64中，所有寄存器都是64位，相对32位的x86来说，标识符发生了变化，比如：从原来的%ebp变成了%rbp。为了向后兼容性，%ebp依然可以使用，不过指向了%rbp的低32位。")]),t._v(" "),n("p",[t._v("X86-64寄存器的变化，不仅体现在位数上，更加体现在寄存器数量上。新增加寄存器%r8到%r15。加上x86的原有8个，一共16个寄存器。")]),t._v(" "),n("p",[t._v("刚刚说到，寄存器集成在CPU上，存取速度比存储器快好几个数量级，寄存器多了，GCC就可以更多的使用寄存器，替换之前的存储器堆栈使用，从而大大提升性能。")]),t._v(" "),n("p",[t._v("让寄存器为己所用，就得了解它们的用途，这些用途都涉及函数调用，X86-64有16个64位寄存器，分别是：")]),t._v(" "),n("p",[t._v("%rax，%rbx，%rcx，%rdx，%rsi，%rdi，%rbp，%rsp，%r8，%r9，%r10，%r11，%r12，%r13，%r14，%r15。")]),t._v(" "),n("p",[t._v("其中：")]),t._v(" "),n("p",[t._v("%rax 作为函数返回值使用。")]),t._v(" "),n("p",[t._v("%rsp 栈指针寄存器，指向栈顶。")]),t._v(" "),n("p",[t._v("%rdi，%rsi，%rdx，%rcx，%r8，%r9 用作函数参数，依次对应第1参数，第2参数…")]),t._v(" "),n("p",[t._v("%rbx，%rbp，%r12，%r13，%14，%15 用作数据存储，遵循被调用者使用规则，简单说就是随便用，调用子函数之前要备份它，以防他被修改。")]),t._v(" "),n("p",[t._v("%r10，%r11 用作数据存储，遵循调用者使用规则，简单说就是使用之前要先保存原值。")]),t._v(" "),n("p",[n("img",{attrs:{src:"media/1e797b88a9a47d8bf638b1897e086c27.png",alt:""}})]),t._v(" "),n("h2",{attrs:{id:"_5-2-使用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-使用命令"}},[t._v("#")]),t._v(" 5.2 使用命令")]),t._v(" "),n("p",[n("strong",[t._v("info registers")])]),t._v(" "),n("p",[t._v("查看寄存器的情况。（不包括浮点寄存器）")]),t._v(" "),n("p",[n("strong",[t._v("info all-registers")])]),t._v(" "),n("p",[t._v("查看所有寄存器的情况。（包括浮点寄存器）")]),t._v(" "),n("p",[n("strong",[t._v("info registers <regname …>")])]),t._v(" "),n("p",[t._v("查看所指定的寄存器的情况。")]),t._v(" "),n("p",[n("strong",[t._v("set $<regname>=<value>")])]),t._v(" "),n("p",[t._v("修改寄存器的值。")]),t._v(" "),n("h2",{attrs:{id:"_5-3-示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-示例"}},[t._v("#")]),t._v(" 5.3 示例")]),t._v(" "),n("p",[t._v("源代码test2.c同上")]),t._v(" "),n("h3",{attrs:{id:"_5-2-1-调试过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-1-调试过程"}},[t._v("#")]),t._v(" 5.2.1 调试过程")]),t._v(" "),n("p",[t._v("启动GDB：")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>gdb -q test2")])]),t._v(" "),n("p",[n("em",[t._v("Reading symbols from /home/luo/workspace/test/exec/test2...done.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) b main --------------")]),t._v(" 在main函数设置断点")]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 1 at 0x40052d: file test2.c, line 15.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) r --------------")]),t._v(" 运行程序")]),t._v(" "),n("p",[n("em",[t._v("Starting program: /home/luo/workspace/test/exec/test2")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 1, main () at test2.c:15")])]),t._v(" "),n("p",[n("em",[t._v("15  int i = 0;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) s --------------")]),t._v(" step单步执行")]),t._v(" "),n("p",[n("em",[t._v("16  int b = 0;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v("17  int n = 20;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v("18  int sum = 0;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v("19  sum = func(40);")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v("func (m=40) at test2.c:4 --------------")]),t._v(" 进入*func()*函数了")]),t._v(" "),n("p",[n("em",[t._v("4  int n = 0;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) i all-r --------------")]),t._v(" 显示所有寄存器信息")]),t._v(" "),n("p",[n("em",[t._v("rax 0x400525 4195621")])]),t._v(" "),n("p",[n("em",[t._v("rbx 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("rcx 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("rdx 0x7fffffffe1a8 140737488347560")])]),t._v(" "),n("p",[n("em",[t._v("rsi 0x7fffffffe198 140737488347544")])]),t._v(" "),n("p",[n("em",[t._v("rdi 0x28 40")])]),t._v(" "),n("p",[n("em",[t._v("rbp 0x7fffffffe090 0x7fffffffe090")])]),t._v(" "),n("p",[n("em",[t._v("rsp 0x7fffffffe090 0x7fffffffe090")])]),t._v(" "),n("p",[n("em",[t._v("r8 0x30555a3c60 207590407264")])]),t._v(" "),n("p",[n("em",[t._v("r9 0x305360ec80 207557291136")])]),t._v(" "),n("p",[n("em",[t._v("r10 0x7fffffffdf40 140737488346944")])]),t._v(" "),n("p",[n("em",[t._v("r11 0x3055221b00 207586728704")])]),t._v(" "),n("p",[n("em",[t._v("r12 0x4003b0 4195248")])]),t._v(" "),n("p",[n("em",[t._v("r13 0x7fffffffe190 140737488347536")])]),t._v(" "),n("p",[n("em",[t._v("r14 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("r15 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("rip 0x4004f7 0x4004f7 <func+7>")])]),t._v(" "),n("p",[n("em",[t._v("eflags 0x206 [ PF IF ]")])]),t._v(" "),n("p",[n("em",[t._v("cs 0x33 51")])]),t._v(" "),n("p",[n("em",[t._v("ss 0x2b 43")])]),t._v(" "),n("p",[n("em",[t._v("ds 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("es 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("fs 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("gs 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("st0 0 (raw 0x00000000000000000000)")])]),t._v(" "),n("p",[n("em",[t._v("st1 0 (raw 0x00000000000000000000)")])]),t._v(" "),n("p",[n("em",[t._v("---Type <return> to continue, or q <return> to quit---q")])]),t._v(" "),n("p",[n("em",[t._v("Quit --------------")]),t._v(" 退出显示")]),t._v(" "),n("p",[n("em",[t._v("(gdb) i r --------------")]),t._v(" 显示寄存器信息，不包括浮点寄存器")]),t._v(" "),n("p",[n("em",[t._v("rax 0x400525 4195621")])]),t._v(" "),n("p",[n("em",[t._v("rbx 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("rcx 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("rdx 0x7fffffffe1a8 140737488347560")])]),t._v(" "),n("p",[n("em",[t._v("rsi 0x7fffffffe198 140737488347544")])]),t._v(" "),n("p",[n("em",[t._v("rdi 0x28 40")])]),t._v(" "),n("p",[n("em",[t._v("rbp 0x7fffffffe090 0x7fffffffe090")])]),t._v(" "),n("p",[n("em",[t._v("rsp 0x7fffffffe090 0x7fffffffe090")])]),t._v(" "),n("p",[n("em",[t._v("r8 0x30555a3c60 207590407264")])]),t._v(" "),n("p",[n("em",[t._v("r9 0x305360ec80 207557291136")])]),t._v(" "),n("p",[n("em",[t._v("r10 0x7fffffffdf40 140737488346944")])]),t._v(" "),n("p",[n("em",[t._v("r11 0x3055221b00 207586728704")])]),t._v(" "),n("p",[n("em",[t._v("r12 0x4003b0 4195248")])]),t._v(" "),n("p",[n("em",[t._v("r13 0x7fffffffe190 140737488347536")])]),t._v(" "),n("p",[n("em",[t._v("r14 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("r15 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("rip 0x4004f7 0x4004f7 <func+7>")])]),t._v(" "),n("p",[n("em",[t._v("eflags 0x206 [ PF IF ]")])]),t._v(" "),n("p",[n("em",[t._v("cs 0x33 51")])]),t._v(" "),n("p",[n("em",[t._v("ss 0x2b 43")])]),t._v(" "),n("p",[n("em",[t._v("ds 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("es 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("fs 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("gs 0x0 0")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) info registers rax --------------")]),t._v(" 查看指定寄存器的信息")]),t._v(" "),n("p",[n("em",[t._v("rax 0x400525 4195621")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) n --------------")]),t._v(" 单步执行")]),t._v(" "),n("p",[n("em",[t._v("5  int i = 0;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v("6  for(i = 0; i < m; i++){")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v("7   n += m;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) u --------------")]),t._v(" 执行直至循环结束")]),t._v(" "),n("p",[n("em",[t._v("6  for(i = 0; i < m; i++){")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v("10  return n;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) i r rax --------------")]),t._v(" 查看指定寄存器"),n("em",[t._v("rax")]),t._v("信息，其存放函数返回值")]),t._v(" "),n("p",[n("em",[t._v("rax 0x28 40")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) n --------------")]),t._v(" 单步执行，此时已经return")]),t._v(" "),n("p",[n("em",[t._v("12 }")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) i r rax --------------")]),t._v(" 查看"),n("em",[t._v("rax")]),t._v("信息，为1600")]),t._v(" "),n("p",[n("em",[t._v("rax 0x640 1600")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) set $rax=99 --------------")]),t._v(" 将"),n("em",[t._v("rax")]),t._v("值修改为99")]),t._v(" "),n("p",[n("em",[t._v("(gdb) i r rax --------------")]),t._v(" 再查看"),n("em",[t._v("rax")]),t._v("，为99")]),t._v(" "),n("p",[n("em",[t._v("rax 0x63 99")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) n --------------")]),t._v(" 单步执行，此时已经退出函数")]),t._v(" "),n("p",[n("em",[t._v("main () at test2.c:20")])]),t._v(" "),n("p",[n("em",[t._v("20  for(i = 0; i < 10; i++){")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) p sum -----------")]),t._v(" 显示sum值，其值应为刚刚*func()*函数的返回值")]),t._v(" "),n("p",[n("em",[t._v("$1 = 99 -----------")]),t._v(" 正确")]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("h1",{attrs:{id:"_6-查看程序的堆栈"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-查看程序的堆栈"}},[t._v("#")]),t._v(" 6 查看程序的堆栈")]),t._v(" "),n("h2",{attrs:{id:"_6-1-背景知识"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-背景知识"}},[t._v("#")]),t._v(" 6.1 背景知识")]),t._v(" "),n("p",[t._v("当你的程序到暂停到断点处时，你需要知道的第一件事就是知道程序停在哪儿，以及通过什么样的函数调用关系到达这里的。")]),t._v(" "),n("p",[t._v("每当你的程序调用一个函数，这个函数的相关信息将会生成，该信息包括这个函数在程序中的位置，函数的参数，以及被调用的局部变量的值。这些信息保存在一个数据块中，这个数据块叫做栈框。这些栈框位于内存中称为栈的区域。")]),t._v(" "),n("p",[t._v("当你的程序断点处停止，GDB查看堆栈的命令允许你看到所有函数相关的信息。")]),t._v(" "),n("p",[t._v("栈被划分为多个连续的块，每个块称为栈框；每个栈框都存有与调用函数相关的数据。栈框中包含了调用函数的参数，调用函数的局部变量。以及这个函数的执行的地址。")]),t._v(" "),n("p",[t._v("当程序开始执行时，栈上就只有一个栈框，也就是用来描述Main函数的。这个栈框称为初始化栈框或最外层栈框。每当调用一个函数，一个新的栈框将会生成。每当一个函数结束，该函数对应的栈框将会消除。如果一个函数是递归函数，这将会对同一个函数产生很多个栈框。正在执行函数的栈框将叫做最内层栈框。这个是所有存在栈框中最新创建的。在你的程序里，栈框通过它对应到的地址进行标识。一个栈框由多个字节组成，每个栈框都有自己的地址，当程序执行到这个栈框时。通常这个栈框地址存放在特定的寄存器中。")]),t._v(" "),n("p",[t._v("gdb为每个存在的栈框赋上一个标号。标号从0开始，0表示最里层的栈框。也就是正在被调用函数的栈框。这些标号在程序中并不存在，它是由gdb赋予的，gdb通过赋予这个标号来给gdb的命令指定哪个栈框。")]),t._v(" "),n("h2",{attrs:{id:"_6-2-使用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-使用命令"}},[t._v("#")]),t._v(" 6.2 使用命令")]),t._v(" "),n("p",[n("strong",[t._v("frame args")])]),t._v(" "),n("p",[t._v("这个frame命令允许你从一个栈框移动到另一个栈框，然后可以打印出你选择的栈框，args要么是栈框的地址，要么是栈框的标号，如果没有参数，frame命令将会打印出当前的栈框。")]),t._v(" "),n("p",[n("strong",[t._v("select -frame")])]),t._v(" "),n("p",[t._v("select -frame命令允许你从一个栈框移动到另外一个栈框而不打印栈框的信息，这个命令可以看作是frame命令的silent版本。")]),t._v(" "),n("p",[n("strong",[t._v("backtrace")])]),t._v(" "),n("p",[n("strong",[t._v("bt")])]),t._v(" "),n("p",[t._v("bt命令打印栈全部的backtrace，每个栈框显示一行。你可以在任何时间结束backtrace通过键入系统中断字符，ctrl+c。")]),t._v(" "),n("p",[n("strong",[t._v("backtrace n")])]),t._v(" "),n("p",[n("strong",[t._v("bt n")])]),t._v(" "),n("p",[t._v("bt n 命令将会显示最内层的n个栈框。")]),t._v(" "),n("p",[n("strong",[t._v("backtrace -n")])]),t._v(" "),n("p",[n("strong",[t._v("bt -n")])]),t._v(" "),n("p",[t._v("bt -n将会显示最外层的n个栈框。")]),t._v(" "),n("p",[n("strong",[t._v("backtrace full")])]),t._v(" "),n("p",[n("strong",[t._v("bt full")])]),t._v(" "),n("p",[n("strong",[t._v("bt full n")])]),t._v(" "),n("p",[n("strong",[t._v("bt full -n")])]),t._v(" "),n("p",[t._v("如果添加full这个参数的话，将会显示栈框中的局部变量。")]),t._v(" "),n("p",[n("strong",[t._v("frame n")])]),t._v(" "),n("p",[n("strong",[t._v("f n")])]),t._v(" "),n("p",[t._v("frame n(f n)将会选择栈框n,栈框0是最内层的栈框，也就是当前执行的函数，栈框1是调用最内层栈框的函数。最大的栈框就是main函数对应的栈框。")]),t._v(" "),n("p",[n("strong",[t._v("frame addr")])]),t._v(" "),n("p",[n("strong",[t._v("f addr")])]),t._v(" "),n("p",[t._v("通过栈框的地址选择栈框。如果栈框被bug破坏掉了，这将是主要的方法去查看栈框。栈框破坏掉了，gdb将不能通过栈框标号去定位栈框。另外，如果你的程序有多个栈，在多个栈切换时这中方法将很有用。")]),t._v(" "),n("p",[n("strong",[t._v("up n")])]),t._v(" "),n("p",[t._v("up n将会朝外层栈框走n个。它的方向是朝最外层的栈框，也就是最大的栈框号。")]),t._v(" "),n("p",[n("strong",[t._v("down n")])]),t._v(" "),n("p",[t._v("down n和up n是对应的，它将会朝最内层走n个栈框。")]),t._v(" "),n("p",[t._v("这些命令将会打印两行关于该栈框的信息，第一行将会显示栈框号，函数名，参数，以及源代码所在的文件名，和所在的行。")]),t._v(" "),n("h2",{attrs:{id:"_6-3-示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-示例"}},[t._v("#")]),t._v(" 6.3 示例")]),t._v(" "),n("h3",{attrs:{id:"_6-3-1-源代码test3-c"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-1-源代码test3-c"}},[t._v("#")]),t._v(" 6.3.1 源代码test3.c")]),t._v(" "),n("ol",[n("li",[t._v("#include <stdio.h>")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" func4("),n("strong",[t._v("int")]),t._v(" m)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" ret = m - m / 2;")]),t._v(" "),n("li",[n("strong",[t._v("return")]),t._v(" ret;")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" func3("),n("strong",[t._v("int")]),t._v(" m)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" ret = m + func4(m);")]),t._v(" "),n("li",[n("strong",[t._v("return")]),t._v(" ret;")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" func2("),n("strong",[t._v("int")]),t._v(" m)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" ret = m * func3(m);")]),t._v(" "),n("li",[n("strong",[t._v("return")]),t._v(" ret;")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" func1("),n("strong",[t._v("int")]),t._v(" m)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" ret = func2(m) + 1;")]),t._v(" "),n("li",[n("strong",[t._v("return")]),t._v(" ret;")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" main()")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" m = 40;")]),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" n = func1(m);")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("return")]),t._v(" 0;")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li")]),t._v(" "),n("h3",{attrs:{id:"_6-3-2-调试过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-2-调试过程"}},[t._v("#")]),t._v(" 6.3.2 调试过程")]),t._v(" "),n("p",[t._v("启动GDB:")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>gdb -q test3")])]),t._v(" "),n("p",[n("em",[t._v("Reading symbols from /home/luo/workspace/test/exec/test3...done.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) b main --------------")]),t._v(" 在main函数设置断点")]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 1 at 0x40057d: file ../source/test3.c, line 30.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) r --------------")]),t._v(" 运行程序")]),t._v(" "),n("p",[n("em",[t._v("Starting program: /home/luo/workspace/test/exec/test3")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 1, main () at ../source/test3.c:30")])]),t._v(" "),n("p",[n("em",[t._v("30  int m = 40;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) s --------------")]),t._v(" step单步执行")]),t._v(" "),n("p",[n("em",[t._v("31  int n = func1(m);")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) s")])]),t._v(" "),n("p",[n("em",[t._v("func1 (m=40) at ../source/test3.c:24")])]),t._v(" "),n("p",[n("em",[t._v("24  int ret = func2(m) + 1;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) s")])]),t._v(" "),n("p",[n("em",[t._v("func2 (m=40) at ../source/test3.c:18")])]),t._v(" "),n("p",[n("em",[t._v("18  int ret = m * func3(m);")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) s")])]),t._v(" "),n("p",[n("em",[t._v("func3 (m=40) at ../source/test3.c:11")])]),t._v(" "),n("p",[n("em",[t._v("11  int ret = m + func4(m);")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) s")])]),t._v(" "),n("p",[n("em",[t._v("func4 (m=40) at ../source/test3.c:5")])]),t._v(" "),n("p",[n("em",[t._v("5  int ret = m - m / 2;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) bt --------------")]),t._v(" 显示栈信息")]),t._v(" "),n("p",[n("em",[t._v("#0 func4 (m=40) at ../source/test3.c:5")])]),t._v(" "),n("p",[n("em",[t._v("#1 0x0000000000400527 in func3 (m=40) at ../source/test3.c:11")])]),t._v(" "),n("p",[n("em",[t._v("#2 0x0000000000400549 in func2 (m=40) at ../source/test3.c:18")])]),t._v(" "),n("p",[n("em",[t._v("#3 0x000000000040056a in func1 (m=40) at ../source/test3.c:24")])]),t._v(" "),n("p",[n("em",[t._v("#4 0x000000000040058e in main () at ../source/test3.c:31")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) frame 2 --------------")]),t._v(" 跳到标号为2的栈框")]),t._v(" "),n("p",[n("em",[t._v("#2 0x0000000000400549 in func2 (m=40) at ../source/test3.c:18")])]),t._v(" "),n("p",[n("em",[t._v("18  int ret = m * func3(m);")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) select-frame 2 -------------")]),t._v(" 跳到标号为2的栈框并且不打印信息")]),t._v(" "),n("p",[n("em",[t._v("(gdb) bt 3 --------------")]),t._v(" 显示最内层的3个栈框")]),t._v(" "),n("p",[n("em",[t._v("#0 func4 (m=40) at ../source/test3.c:5")])]),t._v(" "),n("p",[n("em",[t._v("#1 0x0000000000400527 in func3 (m=40) at ../source/test3.c:11")])]),t._v(" "),n("p",[n("em",[t._v("#2 0x0000000000400549 in func2 (m=40) at ../source/test3.c:18")])]),t._v(" "),n("p",[n("em",[t._v("(More stack frames follow...)")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) bt -3 --------------")]),t._v(" 显示最外层的3个栈框")]),t._v(" "),n("p",[n("em",[t._v("#2 0x0000000000400549 in func2 (m=40) at ../source/test3.c:18")])]),t._v(" "),n("p",[n("em",[t._v("#3 0x000000000040056a in func1 (m=40) at ../source/test3.c:24")])]),t._v(" "),n("p",[n("em",[t._v("#4 0x000000000040058e in main () at ../source/test3.c:31")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) bt full --------------")]),t._v(" 显示栈信息，包括局部变量")]),t._v(" "),n("p",[n("em",[t._v("#0 func4 (m=40) at ../source/test3.c:5")])]),t._v(" "),n("p",[n("em",[t._v("ret = 0")])]),t._v(" "),n("p",[n("em",[t._v("#1 0x0000000000400527 in func3 (m=40) at ../source/test3.c:11")])]),t._v(" "),n("p",[n("em",[t._v("ret = 0")])]),t._v(" "),n("p",[n("em",[t._v("#2 0x0000000000400549 in func2 (m=40) at ../source/test3.c:18")])]),t._v(" "),n("p",[n("em",[t._v("ret = 0")])]),t._v(" "),n("p",[n("em",[t._v("#3 0x000000000040056a in func1 (m=40) at ../source/test3.c:24")])]),t._v(" "),n("p",[n("em",[t._v("ret = 0")])]),t._v(" "),n("p",[n("em",[t._v("#4 0x000000000040058e in main () at ../source/test3.c:31")])]),t._v(" "),n("p",[n("em",[t._v("m = 40")])]),t._v(" "),n("p",[n("em",[t._v("n = 0")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) frame 2")]),t._v(" "),n("em",[t._v("--------------")]),t._v(" 移动到标号为2的栈框")]),t._v(" "),n("p",[n("em",[t._v("#2 0x0000000000400549 in func2 (m=40) at ../source/test3.c:18")])]),t._v(" "),n("p",[n("em",[t._v("18  int ret = m * func3(m);")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) bt")])]),t._v(" "),n("p",[n("em",[t._v("#0 func4 (m=40) at ../source/test3.c:5")])]),t._v(" "),n("p",[n("em",[t._v("#1 0x0000000000400527 in func3 (m=40) at ../source/test3.c:11")])]),t._v(" "),n("p",[n("em",[t._v("#2 0x0000000000400549 in func2 (m=40) at ../source/test3.c:18")])]),t._v(" "),n("p",[n("em",[t._v("#3 0x000000000040056a in func1 (m=40) at ../source/test3.c:24")])]),t._v(" "),n("p",[n("em",[t._v("#4 0x000000000040058e in main () at ../source/test3.c:31")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) up 2 --------------")]),t._v(" 向外层栈框移动2层")]),t._v(" "),n("p",[n("em",[t._v("#4 0x000000000040058e in main () at ../source/test3.c:31")])]),t._v(" "),n("p",[n("em",[t._v("31  int n = func1(m);")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) down 3 --------------")]),t._v(" 向内层栈框移动3层")]),t._v(" "),n("p",[n("em",[t._v("#1 0x0000000000400527 in func3 (m=40) at ../source/test3.c:11")])]),t._v(" "),n("p",[n("em",[t._v("11  int ret = m + func4(m);")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("h1",{attrs:{id:"_7-多线程调试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-多线程调试"}},[t._v("#")]),t._v(" 7 多线程调试")]),t._v(" "),n("h2",{attrs:{id:"_7-1-使用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-使用命令"}},[t._v("#")]),t._v(" 7.1 使用命令")]),t._v(" "),n("p",[n("strong",[t._v("info threads")])]),t._v(" "),n("p",[t._v("查看当前进程的线程。GDB会为每个线程分配一个ID, 后面操作线程的时候会用到这个ID。前面有*的是当前调试的线程。")]),t._v(" "),n("p",[n("strong",[t._v("thread <ID>")])]),t._v(" "),n("p",[t._v("切换调试的线程为指定ID的线程。")]),t._v(" "),n("p",[n("strong",[t._v("break file.c:number thread all")])]),t._v(" "),n("p",[t._v("在file.c文件第number行处为所有经过这里的线程设置断点。")]),t._v(" "),n("p",[n("strong",[t._v("set scheduler-locking off|on|step")])]),t._v(" "),n("p",[t._v("在使用step或者continue命令调试当前被调试线程的时候，其他线程也是同时执行的, 怎么只让被调试程序执行呢？")]),t._v(" "),n("p",[t._v("通过这个命令就可以实现这个需求。")]),t._v(" "),n("p",[t._v("off 不锁定任何线程，也就是所有线程都执行，这是默认值。")]),t._v(" "),n("p",[t._v("on 只有当前被调试程序会执行。")]),t._v(" "),n("p",[t._v("step 在单步的时候，除了next过一个函数的情况 (熟悉情况的人可能知道，这其实是一个设置断点然后continue的行为)以外，只有当前线程会执行。")]),t._v(" "),n("p",[n("strong",[t._v("thread apply ID1 ID2 command")])]),t._v(" "),n("p",[t._v("让一个或多个线程执行GDB命令command。")]),t._v(" "),n("p",[n("strong",[t._v("thread apply all command")])]),t._v(" "),n("p",[t._v("让所有被调试线程执行GDB命令command。")]),t._v(" "),n("h2",{attrs:{id:"_7-2-示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-示例"}},[t._v("#")]),t._v(" 7.2 示例")]),t._v(" "),n("h3",{attrs:{id:"_7-2-1-源代码test4-c"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-1-源代码test4-c"}},[t._v("#")]),t._v(" 7.2.1 源代码test4.c")]),t._v(" "),n("ol",[n("li",[t._v("/*")]),t._v(" "),n("li",[t._v("* 本文件为多线程调试测试准备")]),t._v(" "),n("li",[t._v("*/")]),t._v(" "),n("li",[t._v("#include <stdio.h>")]),t._v(" "),n("li",[t._v("#include <stdlib.h>")]),t._v(" "),n("li",[t._v("#include <pthread.h>")]),t._v(" "),n("li",[t._v("#include <unistd.h>")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("void")]),t._v(" func1()")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" i = 0;")]),t._v(" "),n("li",[n("strong",[t._v("while")]),t._v("(1){")]),t._v(" "),n("li",[t._v("i++;")]),t._v(" "),n("li",[t._v('printf("**********************************\\n");')]),t._v(" "),n("li",[t._v('printf("this is function 1!\\n");')]),t._v(" "),n("li",[t._v('printf("this is %d time!\\n", i);')]),t._v(" "),n("li",[t._v("sleep(1);")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("return")]),t._v(" ;")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("void")]),t._v(" func2()")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" i = 0;")]),t._v(" "),n("li",[n("strong",[t._v("while")]),t._v("(1){")]),t._v(" "),n("li",[t._v("i++;")]),t._v(" "),n("li",[t._v('printf("**********************************\\n");')]),t._v(" "),n("li",[t._v('printf("this is function 2!\\n");')]),t._v(" "),n("li",[t._v('printf("this is %d time!\\n", i);')]),t._v(" "),n("li",[t._v("sleep(1);")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li",[n("strong",[t._v("return")]),t._v(" ;")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" main()")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[t._v("pthread_t td1, td2, td3;")]),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" ret_td1, ret_td2, ret_td3;")]),t._v(" "),n("li"),t._v(" "),n("li",[t._v("ret_td1 = pthread_create(&td1, NULL, ("),n("strong",[t._v("void")]),t._v("*)&func1, NULL);")]),t._v(" "),n("li",[t._v("ret_td2 = pthread_create(&td2, NULL, ("),n("strong",[t._v("void")]),t._v("*)&func2, NULL);")]),t._v(" "),n("li",[t._v("ret_td3 = pthread_create(&td3, NULL, ("),n("strong",[t._v("void")]),t._v("*)&func2, NULL);")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("if")]),t._v("(ret_td1 != 0){")]),t._v(" "),n("li",[t._v('printf("线程1创建失败\\n");')]),t._v(" "),n("li",[t._v("}"),n("strong",[t._v("else")]),t._v("{")]),t._v(" "),n("li",[t._v('printf("线程1创建成功\\n");')]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("if")]),t._v("(ret_td2 != 0){")]),t._v(" "),n("li",[t._v('printf("线程2创建失败\\n");')]),t._v(" "),n("li",[t._v("}"),n("strong",[t._v("else")]),t._v("{")]),t._v(" "),n("li",[t._v('printf("线程2创建成功\\n");')]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("if")]),t._v("(ret_td3 != 0){")]),t._v(" "),n("li",[t._v('printf("线程3创建失败\\n");')]),t._v(" "),n("li",[t._v("}"),n("strong",[t._v("else")]),t._v("{")]),t._v(" "),n("li",[t._v('printf("线程3创建成功\\n");')]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("return")]),t._v(" 0;")]),t._v(" "),n("li",[t._v("}")])]),t._v(" "),n("h3",{attrs:{id:"_7-2-2-调试过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-2-调试过程"}},[t._v("#")]),t._v(" 7.2.2 调试过程")]),t._v(" "),n("p",[t._v("编译生成可执行文件，注意带上 "),n("em",[t._v("-lpthread")]),t._v(" ：")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>gcc -g ../source/test4.c -o test4 -lpthread")])]),t._v(" "),n("p",[t._v("启动GDB:")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>gdb -q test4")])]),t._v(" "),n("p",[n("em",[t._v("Reading symbols from /home/luo/workspace/test/exec/test4...done.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) b main --------------")]),t._v(" 在main()函数设置断点")]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 1 at 0x400776: file ../source/test4.c, line 42.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) l 1 --------------")]),t._v(" 列出源代码")]),t._v(" "),n("p",[n("em",[t._v("1 /*")])]),t._v(" "),n("p",[n("em",[t._v("2 * 本文件为多线程调试测试准备")])]),t._v(" "),n("p",[n("em",[t._v("3 */")])]),t._v(" "),n("p",[n("em",[t._v("4 #include <stdio.h>")])]),t._v(" "),n("p",[n("em",[t._v("5 #include <stdlib.h>")])]),t._v(" "),n("p",[n("em",[t._v("6 #include <pthread.h>")])]),t._v(" "),n("p",[n("em",[t._v("7 #include <unistd.h>")])]),t._v(" "),n("p",[n("em",[t._v("8")])]),t._v(" "),n("p",[n("em",[t._v("9 void func1()")])]),t._v(" "),n("p",[n("em",[t._v("10 {")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v("11  int i = 0;")])]),t._v(" "),n("p",[n("em",[t._v("12  while(1){")])]),t._v(" "),n("p",[n("em",[t._v("13   i++;")])]),t._v(" "),n("p",[n("em",[t._v('14   printf("**********************************\\n");')])]),t._v(" "),n("p",[n("em",[t._v('15   printf("this is function 1!\\n");')])]),t._v(" "),n("p",[n("em",[t._v('16   printf("this is %d time!\\n", i);')])]),t._v(" "),n("p",[n("em",[t._v("17   sleep(1);")])]),t._v(" "),n("p",[n("em",[t._v("18  }")])]),t._v(" "),n("p",[n("em",[t._v("19")])]),t._v(" "),n("p",[n("em",[t._v("20  return ;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v("21 }")])]),t._v(" "),n("p",[n("em",[t._v("22")])]),t._v(" "),n("p",[n("em",[t._v("23 void func2()")])]),t._v(" "),n("p",[n("em",[t._v("24 {")])]),t._v(" "),n("p",[n("em",[t._v("25  int i = 0;")])]),t._v(" "),n("p",[n("em",[t._v("26  while(1){")])]),t._v(" "),n("p",[n("em",[t._v("27   i++;")])]),t._v(" "),n("p",[n("em",[t._v('28   printf("**********************************\\n");')])]),t._v(" "),n("p",[n("em",[t._v('29   printf("this is function 2!\\n");')])]),t._v(" "),n("p",[n("em",[t._v('30   printf("this is %d time!\\n", i);')])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v("31   sleep(1);")])]),t._v(" "),n("p",[n("em",[t._v("32  }")])]),t._v(" "),n("p",[n("em",[t._v("33  return ;")])]),t._v(" "),n("p",[n("em",[t._v("34 }")])]),t._v(" "),n("p",[n("em",[t._v("35")])]),t._v(" "),n("p",[n("em",[t._v("36")])]),t._v(" "),n("p",[n("em",[t._v("37 int main()")])]),t._v(" "),n("p",[n("em",[t._v("38 {")])]),t._v(" "),n("p",[n("em",[t._v("39  pthread_t td1, td2, td3;")])]),t._v(" "),n("p",[n("em",[t._v("40  int ret_td1, ret_td2, ret_td3;")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v("41")])]),t._v(" "),n("p",[n("em",[t._v("42  ret_td1 = pthread_create(&td1, NULL, (void*)&func1, NULL);")])]),t._v(" "),n("p",[n("em",[t._v("43  ret_td2 = pthread_create(&td2, NULL, (void*)&func2, NULL);")])]),t._v(" "),n("p",[n("em",[t._v("44  ret_td3 = pthread_create(&td3, NULL, (void*)&func2, NULL);")])]),t._v(" "),n("p",[n("em",[t._v("45")])]),t._v(" "),n("p",[n("em",[t._v("46  if(ret_td1 != 0){")])]),t._v(" "),n("p",[n("em",[t._v('47   printf("线程1创建失败\\n");')])]),t._v(" "),n("p",[n("em",[t._v("48  }else{")])]),t._v(" "),n("p",[n("em",[t._v('49   printf("线程1创建成功\\n");')])]),t._v(" "),n("p",[n("em",[t._v("50  }")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v("51")])]),t._v(" "),n("p",[n("em",[t._v("52  if(ret_td2 != 0){")])]),t._v(" "),n("p",[n("em",[t._v('53   printf("线程2创建失败\\n");')])]),t._v(" "),n("p",[n("em",[t._v("54  }else{")])]),t._v(" "),n("p",[n("em",[t._v('55   printf("线程2创建成功\\n");')])]),t._v(" "),n("p",[n("em",[t._v("56  }")])]),t._v(" "),n("p",[n("em",[t._v("57")])]),t._v(" "),n("p",[n("em",[t._v("58  if(ret_td3 != 0){")])]),t._v(" "),n("p",[n("em",[t._v('59   printf("线程3创建失败\\n");')])]),t._v(" "),n("p",[n("em",[t._v("60  }else{")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[n("em",[t._v('61   printf("线程3创建成功\\n");')])]),t._v(" "),n("p",[n("em",[t._v("62  }")])]),t._v(" "),n("p",[n("em",[t._v("63")])]),t._v(" "),n("p",[n("em",[t._v("64  return 0;")])]),t._v(" "),n("p",[n("em",[t._v("65 }")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) b 18 --------------")]),t._v(" 在18行设置断点")]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 2 at 0x400725: file ../source/test4.c, line 18.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) b 32 --------------")]),t._v(" 在32行设置断点")]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 3 at 0x40076c: file ../source/test4.c, line 32.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) b 46 --------------")]),t._v(" 在46行设置断点")]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 4 at 0x4007d0: file ../source/test4.c, line 46.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) r --------------")]),t._v(" 运行程序")]),t._v(" "),n("p",[n("em",[t._v("Starting program: /home/luo/workspace/test/exec/test4")])]),t._v(" "),n("p",[n("em",[t._v("[Thread debugging using libthread_db enabled]")])]),t._v(" "),n("p",[n("em",[t._v('Using host libthread_db library "/lib64/libthread_db.so.1".')])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 1, main () at ../source/test4.c:42")])]),t._v(" "),n("p",[n("em",[t._v("42  ret_td1 = pthread_create(&td1, NULL, (void*)&func1, NULL);")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) info threads --------------")]),t._v(" 查看线程信息，目前只有一个主线程")]),t._v(" "),n("p",[n("em",[t._v("Id Target Id Frame")])]),t._v(" "),n("p",[n("em",[t._v('* 1 Thread 0x7ffff7dd2700 (LWP 40907) "test4" main ()')])]),t._v(" "),n("p",[n("em",[t._v("at ../source/test4.c:42")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) c --------------")]),t._v(" 继续运行程序")]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("[New Thread 0x7ffff7dd0700 (LWP 40913)] --------------")]),t._v(" 新线程创建")]),t._v(" "),n("p",[n("em",[t._v("**********************************")])]),t._v(" "),n("p",[n("em",[t._v("[New Thread 0x7ffff75cf700 (LWP 40914)] --------------")]),t._v(" 新线程创建")]),t._v(" "),n("p",[n("em",[t._v("this is function 1!")])]),t._v(" "),n("p",[n("em",[t._v("this is 1 time!")])]),t._v(" "),n("p",[n("em",[t._v("[New Thread 0x7ffff6dce700 (LWP 40915)] --------------")]),t._v(" 新线程创建")]),t._v(" "),n("p",[n("em",[t._v("**********************************")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 4, main () at ../source/test4.c:46")])]),t._v(" "),n("p",[n("em",[t._v("46  if(ret_td1 != 0){")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) info threads --------------")]),t._v(" 查看线程信息")]),t._v(" "),n("p",[n("em",[t._v("Id Target Id Frame")])]),t._v(" "),n("p",[n("em",[t._v('4 Thread 0x7ffff6dce700 (LWP 40915) "test4" 0x00000030552d795d in write () from /lib64/libc.so.6')])]),t._v(" "),n("p",[n("em",[t._v('3 Thread 0x7ffff75cf700 (LWP 40914) "test4" __lll_lock_wait_private ()')])]),t._v(" "),n("p",[n("em",[t._v("at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:95")])]),t._v(" "),n("p",[n("em",[t._v('2 Thread 0x7ffff7dd0700 (LWP 40913) "test4" 0x00000030552b5a0d in nanosleep () from /lib64/libc.so.6')])]),t._v(" "),n("p",[n("em",[t._v('* 1 Thread 0x7ffff7dd2700 (LWP 40907) "test4" main ()')])]),t._v(" "),n("p",[n("em",[t._v("at ../source/test4.c:46")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) set scheduler-locking on --------------")]),t._v(" 设置调试模式为只有当前线程会被执行")]),t._v(" "),n("p",[n("em",[t._v("(gdb) thread 4 --------------")]),t._v(" 切换到4号线程")]),t._v(" "),n("p",[n("em",[t._v("[Switching to thread 4 (Thread 0x7ffff6dce700 (LWP 40915))]")])]),t._v(" "),n("p",[n("em",[t._v("#0 0x00000030552d795d in write () from /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) c --------------")]),t._v(" 当前线程执行continue")]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("this is function 2!")])]),t._v(" "),n("p",[n("em",[t._v("this is 1 time!")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 3, func2 () at ../source/test4.c:32")])]),t._v(" "),n("p",[n("em",[t._v("32  }")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) c")])]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("**********************************")])]),t._v(" "),n("p",[n("em",[t._v("this is function 2!")])]),t._v(" "),n("p",[n("em",[t._v("this is 2 time!")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 3, func2 () at ../source/test4.c:32")])]),t._v(" "),n("p",[n("em",[t._v("32  }")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) thread 3 --------------")]),t._v(" 切换线程")]),t._v(" "),n("p",[n("em",[t._v("[Switching to thread 3 (Thread 0x7ffff75cf700 (LWP 40914))]")])]),t._v(" "),n("p",[n("em",[t._v("#0 __lll_lock_wait_private ()")])]),t._v(" "),n("p",[n("em",[t._v("at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:95")])]),t._v(" "),n("p",[n("em",[t._v("95 ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S: No such file or directory.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) c")])]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("**********************************")])]),t._v(" "),n("p",[n("em",[t._v("this is function 2!")])]),t._v(" "),n("p",[n("em",[t._v("this is 1 time!")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 3, func2 () at ../source/test4.c:32")])]),t._v(" "),n("p",[n("em",[t._v("32  }")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) c")])]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("**********************************")])]),t._v(" "),n("p",[n("em",[t._v("this is function 2!")])]),t._v(" "),n("p",[n("em",[t._v("this is 2 time!")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 3, func2 () at ../source/test4.c:32")])]),t._v(" "),n("p",[n("em",[t._v("32  }")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) thread 2 --------------")]),t._v(" 切换线程")]),t._v(" "),n("p",[n("em",[t._v("[Switching to thread 2 (Thread 0x7ffff7dd0700 (LWP 40913))]")])]),t._v(" "),n("p",[n("em",[t._v("#0 0x00000030552f081b in ?? () from /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) c")])]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("**********************************")])]),t._v(" "),n("p",[n("em",[t._v("this is function 1!")])]),t._v(" "),n("p",[n("em",[t._v("this is 2 time!")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 2, func1 () at ../source/test4.c:18")])]),t._v(" "),n("p",[n("em",[t._v("18  }")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) c")])]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("**********************************")])]),t._v(" "),n("p",[n("em",[t._v("this is function 1!")])]),t._v(" "),n("p",[n("em",[t._v("this is 3 time!")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 2, func1 () at ../source/test4.c:18")])]),t._v(" "),n("p",[n("em",[t._v("18  }")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) info threads --------------")]),t._v(" 查看线程信息，当前位于2号线程")]),t._v(" "),n("p",[n("em",[t._v("Id Target Id Frame")])]),t._v(" "),n("p",[n("em",[t._v('4 Thread 0x7ffff6dce700 (LWP 40915) "test4" func2 ()')])]),t._v(" "),n("p",[n("em",[t._v("at ../source/test4.c:32")])]),t._v(" "),n("p",[n("em",[t._v('3 Thread 0x7ffff75cf700 (LWP 40914) "test4" func2 ()')])]),t._v(" "),n("p",[n("em",[t._v("at ../source/test4.c:32")])]),t._v(" "),n("p",[n("em",[t._v('* 2 Thread 0x7ffff7dd0700 (LWP 40913) "test4" func1 ()')])]),t._v(" "),n("p",[n("em",[t._v("at ../source/test4.c:18")])]),t._v(" "),n("p",[n("em",[t._v('1 Thread 0x7ffff7dd2700 (LWP 40907) "test4" main ()')])]),t._v(" "),n("p",[n("em",[t._v("at ../source/test4.c:46")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) thread apply 2 4 continue -----")]),t._v(" 令2号和4号线程执行continue")]),t._v(" "),n("p",[n("em",[t._v("Thread 2 (Thread 0x7ffff7dd0700 (LWP 40913)):")])]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("**********************************")])]),t._v(" "),n("p",[n("em",[t._v("this is function 1!")])]),t._v(" "),n("p",[n("em",[t._v("this is 4 time!")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 2, func1 () at ../source/test4.c:18")])]),t._v(" "),n("p",[n("em",[t._v("18  }")])]),t._v(" "),n("p",[n("em",[t._v("Thread 4 (Thread 0x7ffff6dce700 (LWP 40915)):")])]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("**********************************")])]),t._v(" "),n("p",[n("em",[t._v("this is function 2!")])]),t._v(" "),n("p",[n("em",[t._v("this is 3 time!")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 3, func2 () at ../source/test4.c:32")])]),t._v(" "),n("p",[n("em",[t._v("32  }")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) thread apply all continue -------------")]),t._v(" 所有线程执行continue")]),t._v(" "),n("p",[n("em",[t._v("Thread 4 (Thread 0x7ffff6dce700 (LWP 40915)):")])]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("**********************************")])]),t._v(" "),n("p",[n("em",[t._v("this is function 2!")])]),t._v(" "),n("p",[n("em",[t._v("this is 4 time!")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 3, func2 () at ../source/test4.c:32")])]),t._v(" "),n("p",[n("em",[t._v("32  }")])]),t._v(" "),n("p",[n("em",[t._v("Thread 3 (Thread 0x7ffff75cf700 (LWP 40914)):")])]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("**********************************")])]),t._v(" "),n("p",[n("em",[t._v("this is function 2!")])]),t._v(" "),n("p",[n("em",[t._v("this is 3 time!")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 3, func2 () at ../source/test4.c:32")])]),t._v(" "),n("p",[n("em",[t._v("32  }")])]),t._v(" "),n("p",[n("em",[t._v("Thread 2 (Thread 0x7ffff7dd0700 (LWP 40913)):")])]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("**********************************")])]),t._v(" "),n("p",[n("em",[t._v("this is function 1!")])]),t._v(" "),n("p",[n("em",[t._v("this is 5 time!")])]),t._v(" "),n("p",[n("em",[t._v("Breakpoint 2, func1 () at ../source/test4.c:18")])]),t._v(" "),n("p",[n("em",[t._v("18  }")])]),t._v(" "),n("p",[n("em",[t._v("Thread 1 (Thread 0x7ffff7dd2700 (LWP 40907)):")])]),t._v(" "),n("p",[n("em",[t._v("Continuing.")])]),t._v(" "),n("p",[n("em",[t._v("线程1创建成功")])]),t._v(" "),n("p",[n("em",[t._v("线程2创建成功")])]),t._v(" "),n("p",[n("em",[t._v("线程3创建成功")])]),t._v(" "),n("p",[n("em",[t._v("[Thread 0x7ffff6dce700 (LWP 40915) exited]")])]),t._v(" "),n("p",[n("em",[t._v("[Thread 0x7ffff75cf700 (LWP 40914) exited]")])]),t._v(" "),n("p",[n("em",[t._v("[Thread 0x7ffff7dd0700 (LWP 40913) exited]")])]),t._v(" "),n("p",[n("em",[t._v("[Inferior 1 (process 40907) exited normally]")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("h1",{attrs:{id:"_8-死锁调试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8-死锁调试"}},[t._v("#")]),t._v(" 8 死锁调试")]),t._v(" "),n("h2",{attrs:{id:"_8-1-使用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-使用命令"}},[t._v("#")]),t._v(" 8.1 使用命令")]),t._v(" "),n("p",[n("strong",[t._v("ps -ef|grep <processname>")])]),t._v(" "),n("p",[t._v("查看进程号，其中processname为进程名。")]),t._v(" "),n("p",[n("strong",[t._v("gdb attach <PID>")])]),t._v(" "),n("p",[t._v("使用GDB调试正在运行的进程。")]),t._v(" "),n("h2",{attrs:{id:"_8-2-示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-示例"}},[t._v("#")]),t._v(" 8.2 示例")]),t._v(" "),n("h3",{attrs:{id:"_8-2-1-源文件test5-c"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-1-源文件test5-c"}},[t._v("#")]),t._v(" 8.2.1 源文件test5.c")]),t._v(" "),n("ol",[n("li",[t._v("/*")]),t._v(" "),n("li",[t._v("*本文件用于测试死锁调试")]),t._v(" "),n("li",[t._v("*")]),t._v(" "),n("li",[t._v("*代码来自网络：http://blog.chinaunix.net/uid-30343738-id-5757210.html")]),t._v(" "),n("li",[t._v("*")]),t._v(" "),n("li",[t._v("*/")]),t._v(" "),n("li"),t._v(" "),n("li",[t._v("#include <stdio.h>")]),t._v(" "),n("li",[t._v("#include <stdlib.h>")]),t._v(" "),n("li",[t._v("#include <unistd.h>")]),t._v(" "),n("li",[t._v("#include <string.h>")]),t._v(" "),n("li",[t._v("#include <pthread.h>")]),t._v(" "),n("li"),t._v(" "),n("li",[t._v("pthread_mutex_t mutex1 = PTHREAD_MUTEX_INITIALIZER;")]),t._v(" "),n("li",[t._v("pthread_mutex_t mutex2 = PTHREAD_MUTEX_INITIALIZER;")]),t._v(" "),n("li",[t._v("pthread_mutex_t mutex3 = PTHREAD_MUTEX_INITIALIZER;")]),t._v(" "),n("li",[t._v("pthread_mutex_t mutex4 = PTHREAD_MUTEX_INITIALIZER;")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("static")]),t._v(" "),n("strong",[t._v("int")]),t._v(" sequence1 = 0;")]),t._v(" "),n("li",[n("strong",[t._v("static")]),t._v(" "),n("strong",[t._v("int")]),t._v(" sequence2 = 0;")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" func1()")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[t._v("pthread_mutex_lock(&mutex1);")]),t._v(" "),n("li",[t._v("++sequence1;")]),t._v(" "),n("li",[t._v("sleep(1);")]),t._v(" "),n("li",[t._v("pthread_mutex_lock(&mutex2);")]),t._v(" "),n("li",[t._v("++sequence2;")]),t._v(" "),n("li",[t._v("pthread_mutex_unlock(&mutex2);")]),t._v(" "),n("li",[t._v("pthread_mutex_unlock(&mutex1);")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("return")]),t._v(" sequence1;")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" func2()")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[t._v("pthread_mutex_lock(&mutex2);")]),t._v(" "),n("li",[t._v("++sequence2;")]),t._v(" "),n("li",[t._v("sleep(1);")]),t._v(" "),n("li",[t._v("pthread_mutex_lock(&mutex1);")]),t._v(" "),n("li",[t._v("++sequence1;")]),t._v(" "),n("li",[t._v("pthread_mutex_unlock(&mutex1);")]),t._v(" "),n("li",[t._v("pthread_mutex_unlock(&mutex2);")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("return")]),t._v(" sequence2;")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("void")]),t._v("* thread1("),n("strong",[t._v("void")]),t._v("* arg)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[n("strong",[t._v("while")]),t._v(" (1)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" iRetValue = func1();")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("if")]),t._v(" (iRetValue == 100000)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[t._v("pthread_exit(NULL);")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("void")]),t._v("* thread2("),n("strong",[t._v("void")]),t._v("* arg)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[n("strong",[t._v("while")]),t._v(" (1)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" iRetValue = func2();")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("if")]),t._v(" (iRetValue == 100000)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[t._v("pthread_exit(NULL);")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("void")]),t._v("* thread3("),n("strong",[t._v("void")]),t._v("* arg)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[n("strong",[t._v("while")]),t._v(" (1)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[t._v("sleep(1);")]),t._v(" "),n("li",[n("strong",[t._v("char")]),t._v(" szBuf[128];")]),t._v(" "),n("li",[t._v("memset(szBuf, 0, "),n("strong",[t._v("sizeof")]),t._v("(szBuf));")]),t._v(" "),n("li",[t._v('strcpy(szBuf, "thread3");')]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("void")]),t._v("* thread4("),n("strong",[t._v("void")]),t._v("* arg)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[n("strong",[t._v("while")]),t._v(" (1)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[t._v("sleep(1);")]),t._v(" "),n("li",[n("strong",[t._v("char")]),t._v(" szBuf[128];")]),t._v(" "),n("li",[t._v("memset(szBuf, 0, "),n("strong",[t._v("sizeof")]),t._v("(szBuf));")]),t._v(" "),n("li",[t._v('strcpy(szBuf, "thread3");')]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" main()")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[t._v("pthread_t tid[4];")]),t._v(" "),n("li",[n("strong",[t._v("if")]),t._v(" (pthread_create(&tid[0], NULL, &thread1, NULL) != 0)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[t._v("_exit(1);")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li",[n("strong",[t._v("if")]),t._v(" (pthread_create(&tid[1], NULL, &thread2, NULL) != 0)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[t._v("_exit(1);")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li",[n("strong",[t._v("if")]),t._v(" (pthread_create(&tid[2], NULL, &thread3, NULL) != 0)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[t._v("_exit(1);")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li",[n("strong",[t._v("if")]),t._v(" (pthread_create(&tid[3], NULL, &thread4, NULL) != 0)")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[t._v("_exit(1);")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li"),t._v(" "),n("li",[t._v("sleep(5);")]),t._v(" "),n("li",[t._v("//pthread_cancel(tid[0]);")]),t._v(" "),n("li"),t._v(" "),n("li",[t._v("pthread_join(tid[0], NULL);")]),t._v(" "),n("li",[t._v("pthread_join(tid[1], NULL);")]),t._v(" "),n("li",[t._v("pthread_join(tid[2], NULL);")]),t._v(" "),n("li",[t._v("pthread_join(tid[3], NULL);")]),t._v(" "),n("li"),t._v(" "),n("li",[t._v("pthread_mutex_destroy(&mutex1);")]),t._v(" "),n("li",[t._v("pthread_mutex_destroy(&mutex2);")]),t._v(" "),n("li",[t._v("pthread_mutex_destroy(&mutex3);")]),t._v(" "),n("li",[t._v("pthread_mutex_destroy(&mutex4);")]),t._v(" "),n("li"),t._v(" "),n("li",[n("strong",[t._v("return")]),t._v(" 0;")]),t._v(" "),n("li",[t._v("}")])]),t._v(" "),n("h3",{attrs:{id:"_8-2-2-调试过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-2-调试过程"}},[t._v("#")]),t._v(" 8.2.2 调试过程")]),t._v(" "),n("p",[t._v("执行程序，程序会卡在这里：")]),t._v(" "),n("p",[n("a",{attrs:{href:"mailto:root@luo:~/workspace/test/exec%3e./test5"}},[n("em",[t._v("root@luo:~/workspace/test/exec\\>./test5")])])]),t._v(" "),n("p",[t._v("另开一个终端，查看进程的信息：")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>ps -ef|grep test5")])]),t._v(" "),n("p",[n("em",[t._v("root 42746 39442 0 14:25 ttyp0 00:00:00 ./test5")])]),t._v(" "),n("p",[n("em",[t._v("root 43464 42753 0 15:11 ttyp2 00:00:00 grep --color=auto test5")])]),t._v(" "),n("p",[t._v("使用GDB工具attach该进程：")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>gdb -q attach 42746")])]),t._v(" "),n("p",[n("em",[t._v("attach: No such file or directory.")])]),t._v(" "),n("p",[n("em",[t._v("Attaching to process 42746")])]),t._v(" "),n("p",[n("em",[t._v("Reading symbols from /home/luo/workspace/test/exec/test5...done.")])]),t._v(" "),n("p",[n("em",[t._v("Reading symbols from /lib64/libpthread.so.0...done.")])]),t._v(" "),n("p",[n("em",[t._v("[New LWP 42750]")])]),t._v(" "),n("p",[n("em",[t._v("[New LWP 42749]")])]),t._v(" "),n("p",[n("em",[t._v("[New LWP 42748]")])]),t._v(" "),n("p",[n("em",[t._v("[New LWP 42747]")])]),t._v(" "),n("p",[n("em",[t._v("[Thread debugging using libthread_db enabled]")])]),t._v(" "),n("p",[n("em",[t._v('Using host libthread_db library "/lib64/libthread_db.so.1".')])]),t._v(" "),n("p",[n("em",[t._v("Loaded symbols for /lib64/libpthread.so.0")])]),t._v(" "),n("p",[n("em",[t._v("Reading symbols from /lib64/libc.so.6...(no debugging symbols found)...done.")])]),t._v(" "),n("p",[n("em",[t._v("Loaded symbols for /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v("Reading symbols from /lib64/ld-linux-x86-64.so.2...(no debugging symbols found)...done.")])]),t._v(" "),n("p",[n("em",[t._v("Loaded symbols for /lib64/ld-linux-x86-64.so.2")])]),t._v(" "),n("p",[n("em",[t._v("0x00007fc3aa9ff492 in pthread_join (threadid=140478357907200, thread_return=0x0)")])]),t._v(" "),n("p",[n("em",[t._v("at pthread_join.c:92")])]),t._v(" "),n("p",[n("em",[t._v("92 pthread_join.c: No such file or directory.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) info threads  -------------")]),t._v(" 查看线程信息")]),t._v(" "),n("p",[n("em",[t._v("Id Target Id Frame")])]),t._v(" "),n("p",[n("em",[t._v('5 Thread 0x7fc3aa9f2700 (LWP 42747) "test5" __lll_lock_wait ()')])]),t._v(" "),n("p",[n("em",[t._v("at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135")])]),t._v(" "),n("p",[n("em",[t._v('4 Thread 0x7fc3aa1f1700 (LWP 42748) "test5" __lll_lock_wait ()')])]),t._v(" "),n("p",[n("em",[t._v("at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135")])]),t._v(" "),n("p",[n("em",[t._v('3 Thread 0x7fc3a99f0700 (LWP 42749) "test5" 0x00000030552b5a0d in nanosleep')])]),t._v(" "),n("p",[n("em",[t._v("() from /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v('2 Thread 0x7fc3a91ef700 (LWP 42750) "test5" 0x00000030552b5a0d in nanosleep')])]),t._v(" "),n("p",[n("em",[t._v("() from /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v('* 1 Thread 0x7fc3aa9f4700 (LWP 42746) "test5" 0x00007fc3aa9ff492 in pthread_join (threadid=140478357907200, thread_return=0x0) at pthread_join.c:92')])]),t._v(" "),n("p",[n("em",[t._v("(gdb) set scheduler-locking on ---------")]),t._v(" 设置调试模式为只有当前线程会执行")]),t._v(" "),n("p",[n("em",[t._v("(gdb) thread apply all bt -------------")]),t._v(" 显示所有线程的栈信息")]),t._v(" "),n("p",[n("em",[t._v("Thread 5 (Thread 0x7fc3aa9f2700 (LWP 42747)):")])]),t._v(" "),n("p",[n("em",[t._v("#0 __lll_lock_wait ()")])]),t._v(" "),n("p",[n("em",[t._v("at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135")])]),t._v(" "),n("p",[n("em",[t._v("#1 0x00007fc3aaa00457 in _L_lock_913 () from /lib64/libpthread.so.0")])]),t._v(" "),n("p",[n("em",[t._v("#2 0x00007fc3aaa00280 in __GI___pthread_mutex_lock (mutex=0x6012c0 <mutex2>)")])]),t._v(" "),n("p",[n("em",[t._v("at ../nptl/pthread_mutex_lock.c:79")])]),t._v(" "),n("p",[n("em",[t._v("#3 0x00000000004008b1 in func1 () at test5.c:27")])]),t._v(" "),n("p",[n("em",[t._v("#4 0x000000000040094e in thread1 (arg=0x0) at test5.c:52")])]),t._v(" "),n("p",[n("em",[t._v("#5 0x00007fc3aa9fe092 in start_thread (arg=0x7fc3aa9f2700)")])]),t._v(" "),n("p",[n("em",[t._v("at pthread_create.c:309")])]),t._v(" "),n("p",[n("em",[t._v("#6 0x00000030552e42bd in clone () from /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v("Thread 4 (Thread 0x7fc3aa1f1700 (LWP 42748)):")])]),t._v(" "),n("p",[n("em",[t._v("#0 __lll_lock_wait ()")])]),t._v(" "),n("p",[n("em",[t._v("at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135")])]),t._v(" "),n("p",[n("em",[t._v("#1 0x00007fc3aaa00457 in _L_lock_913 () from /lib64/libpthread.so.0")])]),t._v(" "),n("p",[n("em",[t._v("#2 0x00007fc3aaa00280 in __GI___pthread_mutex_lock (mutex=0x601280 <mutex1>)")])]),t._v(" "),n("p",[n("em",[t._v("at ../nptl/pthread_mutex_lock.c:79")])]),t._v(" "),n("p",[n("em",[t._v("#3 0x000000000040090d in func2 () at test5.c:40")])]),t._v(" "),n("p",[n("em",[t._v("#4 0x000000000040097c in thread2 (arg=0x0) at test5.c:65")])]),t._v(" "),n("p",[n("em",[t._v("#5 0x00007fc3aa9fe092 in start_thread (arg=0x7fc3aa1f1700)")])]),t._v(" "),n("p",[n("em",[t._v("at pthread_create.c:309")])]),t._v(" "),n("p",[n("em",[t._v("#6 0x00000030552e42bd in clone () from /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v("Thread 3 (Thread 0x7fc3a99f0700 (LWP 42749)):")])]),t._v(" "),n("p",[n("em",[t._v("#0 0x00000030552b5a0d in nanosleep () from /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v("#1 0x00000030552b58a4 in sleep () from /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v("#2 0x00000000004009b0 in thread3 (arg=0x0) at test5.c:78")])]),t._v(" "),n("p",[n("em",[t._v("#3 0x00007fc3aa9fe092 in start_thread (arg=0x7fc3a99f0700)")])]),t._v(" "),n("p",[n("em",[t._v("at pthread_create.c:309")])]),t._v(" "),n("p",[n("em",[t._v("#4 0x00000030552e42bd in clone () from /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v("Thread 2 (Thread 0x7fc3a91ef700 (LWP 42750)):")])]),t._v(" "),n("p",[n("em",[t._v("#0 0x00000030552b5a0d in nanosleep () from /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v("#1 0x00000030552b58a4 in sleep () from /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v("#2 0x00000000004009f5 in thread4 (arg=0x0) at test5.c:89")])]),t._v(" "),n("p",[n("em",[t._v("#3 0x00007fc3aa9fe092 in start_thread (arg=0x7fc3a91ef700)")])]),t._v(" "),n("p",[n("em",[t._v("at pthread_create.c:309")])]),t._v(" "),n("p",[n("em",[t._v("#4 0x00000030552e42bd in clone () from /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v("---Type <return> to continue, or q <return> to quit---")])]),t._v(" "),n("p",[n("em",[t._v("Thread 1 (Thread 0x7fc3aa9f4700 (LWP 42746)):")])]),t._v(" "),n("p",[n("em",[t._v("#0 0x00007fc3aa9ff492 in pthread_join (threadid=140478357907200,")])]),t._v(" "),n("p",[n("em",[t._v("thread_return=0x0) at pthread_join.c:92")])]),t._v(" "),n("p",[n("em",[t._v("#1 0x0000000000400af1 in main () at test5.c:119")])]),t._v(" "),n("p",[t._v("从栈信息可以初步判断，有可能是4号和5号线程锁住了。")]),t._v(" "),n("p",[t._v("查看27行和40行源文件的代码：")]),t._v(" "),n("p",[n("em",[t._v("(gdb) l test5.c:27")])]),t._v(" "),n("p",[n("em",[t._v("22 int func1()")])]),t._v(" "),n("p",[n("em",[t._v("23 {")])]),t._v(" "),n("p",[n("em",[t._v("24  pthread_mutex_lock(&mutex1);")])]),t._v(" "),n("p",[n("em",[t._v("25  ++sequence1;")])]),t._v(" "),n("p",[n("em",[t._v("26  sleep(1);")])]),t._v(" "),n("p",[n("em",[t._v("27  pthread_mutex_lock(&mutex2);")])]),t._v(" "),n("p",[n("em",[t._v("28  ++sequence2;")])]),t._v(" "),n("p",[n("em",[t._v("29  pthread_mutex_unlock(&mutex2);")])]),t._v(" "),n("p",[n("em",[t._v("30  pthread_mutex_unlock(&mutex1);")])]),t._v(" "),n("p",[n("em",[t._v("31")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) l test5.c:40")])]),t._v(" "),n("p",[n("em",[t._v("35 int func2()")])]),t._v(" "),n("p",[n("em",[t._v("36 {")])]),t._v(" "),n("p",[n("em",[t._v("37  pthread_mutex_lock(&mutex2);")])]),t._v(" "),n("p",[n("em",[t._v("38  ++sequence2;")])]),t._v(" "),n("p",[n("em",[t._v("39  sleep(1);")])]),t._v(" "),n("p",[n("em",[t._v("40  pthread_mutex_lock(&mutex1);")])]),t._v(" "),n("p",[n("em",[t._v("41  ++sequence1;")])]),t._v(" "),n("p",[n("em",[t._v("42  pthread_mutex_unlock(&mutex1);")])]),t._v(" "),n("p",[n("em",[t._v("43  pthread_mutex_unlock(&mutex2);")])]),t._v(" "),n("p",[n("em",[t._v("44")])]),t._v(" "),n("p",[t._v("看一下4号和5号线程是不是锁住了：")]),t._v(" "),n("p",[n("em",[t._v("(gdb) thread 5 -------------")]),t._v(" 切换到5号线程")]),t._v(" "),n("p",[n("em",[t._v("[Switching to thread 5 (Thread 0x7fc3aa9f2700 (LWP 42747))]")])]),t._v(" "),n("p",[n("em",[t._v("#0 __lll_lock_wait ()")])]),t._v(" "),n("p",[n("em",[t._v("at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135")])]),t._v(" "),n("p",[n("em",[t._v("135 ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S: No such file or directory.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) n -------------")]),t._v(" 执行下一步，卡住，Ctrl+C跳出")]),t._v(" "),n("p",[n("em",[t._v("^C")])]),t._v(" "),n("p",[n("em",[t._v("Program received signal SIGINT, Interrupt.")])]),t._v(" "),n("p",[n("em",[t._v("__lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135")])]),t._v(" "),n("p",[n("em",[t._v("135 in ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) thread 2 -------------")]),t._v(" 切换到2号线程")]),t._v(" "),n("p",[n("em",[t._v("[Switching to thread 2 (Thread 0x7fc3a91ef700 (LWP 42750))]")])]),t._v(" "),n("p",[n("em",[t._v("#0 0x00000030552b5a0d in nanosleep () from /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) n -------------")]),t._v(" 执行下一步，可正常执行")]),t._v(" "),n("p",[n("em",[t._v("Single stepping until exit from function nanosleep,")])]),t._v(" "),n("p",[n("em",[t._v("which has no line number information.")])]),t._v(" "),n("p",[n("em",[t._v("0x00000030552b58a4 in sleep () from /lib64/libc.so.6")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) n")])]),t._v(" "),n("p",[n("em",[t._v("Single stepping until exit from function sleep,")])]),t._v(" "),n("p",[n("em",[t._v("which has no line number information.")])]),t._v(" "),n("p",[n("em",[t._v("thread4 (arg=0x0) at test5.c:91")])]),t._v(" "),n("p",[n("em",[t._v("91   memset(szBuf, 0, sizeof(szBuf));")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) thread 4 -------------")]),t._v(" 切换到4号线程")]),t._v(" "),n("p",[n("em",[t._v("[Switching to thread 4 (Thread 0x7fc3aa1f1700 (LWP 42748))]")])]),t._v(" "),n("p",[n("em",[t._v("#0 __lll_lock_wait ()")])]),t._v(" "),n("p",[n("em",[t._v("at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135")])]),t._v(" "),n("p",[n("em",[t._v("135 ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S: No such file or directory.")])]),t._v(" "),n("p",[n("em",[t._v("(gdb) n -------------")]),t._v(" 执行下一步，卡住")]),t._v(" "),n("p",[n("em",[t._v("^C^C")])]),t._v(" "),n("p",[n("em",[t._v("Program received signal SIGINT, Interrupt.")])]),t._v(" "),n("p",[n("em",[t._v("__lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135")])]),t._v(" "),n("p",[n("em",[t._v("135 in ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[t._v("以上方法可调试找出程序中出现死锁的地方。")]),t._v(" "),n("h1",{attrs:{id:"_9-core文件调试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-core文件调试"}},[t._v("#")]),t._v(" 9 core文件调试")]),t._v(" "),n("h2",{attrs:{id:"_9-1-使用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-使用命令"}},[t._v("#")]),t._v(" 9.1 使用命令")]),t._v(" "),n("p",[n("strong",[t._v("ulimit -c")])]),t._v(" "),n("p",[t._v("查看core文件生成的大小限制，若为0，则表示不会生成core文件。（注：ulimit不会影响其他shell终端）")]),t._v(" "),n("p",[n("strong",[t._v("ulimit -c <size>")])]),t._v(" "),n("p",[t._v("设置core文件生成的大小。")]),t._v(" "),n("p",[n("strong",[t._v("cat /proc/sys/kernel/core_pattern")])]),t._v(" "),n("p",[t._v("查看core文件路径。")]),t._v(" "),n("p",[n("strong",[t._v("gdb <a.out> <corefile>")])]),t._v(" "),n("p",[t._v("调试core文件")]),t._v(" "),n("h2",{attrs:{id:"_9-2-示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-示例"}},[t._v("#")]),t._v(" 9.2 示例")]),t._v(" "),n("h3",{attrs:{id:"_9-2-1-源代码test6-c"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-1-源代码test6-c"}},[t._v("#")]),t._v(" 9.2.1 源代码test6.c")]),t._v(" "),n("p",[t._v("一个能产生core dump的程序")]),t._v(" "),n("ol",[n("li",[t._v("#include <stdio.h>")]),t._v(" "),n("li",[n("strong",[t._v("static")]),t._v(" "),n("strong",[t._v("void")]),t._v(" sub("),n("strong",[t._v("void")]),t._v(");")]),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" main("),n("strong",[t._v("void")]),t._v(")")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[t._v("sub();")]),t._v(" "),n("li",[n("strong",[t._v("return")]),t._v(" 0;")]),t._v(" "),n("li",[t._v("}")]),t._v(" "),n("li",[n("strong",[t._v("static")]),t._v(" "),n("strong",[t._v("void")]),t._v(" sub("),n("strong",[t._v("void")]),t._v(")")]),t._v(" "),n("li",[t._v("{")]),t._v(" "),n("li",[n("strong",[t._v("int")]),t._v(" *p = NULL;")]),t._v(" "),n("li",[t._v("/* derefernce a null pointer, expect coredump. */")]),t._v(" "),n("li",[t._v('printf("%d", *p);')]),t._v(" "),n("li",[t._v("}")])]),t._v(" "),n("h3",{attrs:{id:"_9-2-2-调试过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-2-调试过程"}},[t._v("#")]),t._v(" 9.2.2 调试过程")]),t._v(" "),n("p",[t._v("查看core文件是否开启：")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>ulimit -c")])]),t._v(" "),n("p",[n("em",[t._v("0")])]),t._v(" "),n("p",[t._v("设置core文件大小：")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>ulimit -c 1024")])]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>ulimit -c")])]),t._v(" "),n("p",[n("em",[t._v("1024")])]),t._v(" "),n("p",[t._v("查看core文件路径：")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>cat /proc/sys/kernel/core_pattern")])]),t._v(" "),n("p",[n("em",[t._v("/SE/core-%e-%p")])]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>ls /SE")])]),t._v(" "),n("p",[n("em",[t._v("ai core--22330 core--4231 log ngtp_agent web_disk")])]),t._v(" "),n("p",[n("em",[t._v("core--21300 core--23374 core--5227 mysql mp.log")])]),t._v(" "),n("p",[t._v("执行程序，生成core文件：")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>./test6")])]),t._v(" "),n("p",[n("em",[t._v("Segmentation fault (core dumped)")])]),t._v(" "),n("p",[t._v("查看是否生成core文件：")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>ls /SE")])]),t._v(" "),n("p",[n("em",[t._v("ai core--23374 core-test6-44938 ngtp_agent")])]),t._v(" "),n("p",[n("em",[t._v("core--21300 core--4231 log mp.log")])]),t._v(" "),n("p",[n("em",[t._v("core--22330 core--5227 mysql web_disk")])]),t._v(" "),n("p",[t._v("使用GDB调试：")]),t._v(" "),n("p",[n("em",[t._v("root@luo:~/workspace/test/exec\\>gdb -q test6 /SE/core-test6-44938")])]),t._v(" "),n("p",[n("em",[t._v("Reading symbols from /home/luo/workspace/test/exec/test6...done.")])]),t._v(" "),n("p",[n("em",[t._v("[New LWP 44938]")])]),t._v(" "),n("p",[n("em",[t._v("Core was generated by `./test6'.")])]),t._v(" "),n("p",[n("em",[t._v("Program terminated with signal 11, Segmentation fault.")])]),t._v(" "),n("p",[n("em",[t._v("#0 0x0000000000400554 in sub () at test6.c:12")])]),t._v(" "),n("p",[n("em",[t._v('12  printf("%d", *p);')])]),t._v(" "),n("p",[n("em",[t._v("(gdb) bt -------------")]),t._v(" 显示栈信息")]),t._v(" "),n("p",[n("em",[t._v("#0 0x0000000000400554 in sub () at test6.c:12")])]),t._v(" "),n("p",[n("em",[t._v("#1 0x0000000000400539 in main () at test6.c:5")])]),t._v(" "),n("p",[n("em",[t._v("(gdb)")])]),t._v(" "),n("p",[t._v("可以看到最后入栈的是sub函数里、位于test6.c文件第12行。所以core dump的问题可能出在这里。")]),t._v(" "),n("h1",{attrs:{id:"_10-gdb调试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_10-gdb调试"}},[t._v("#")]),t._v(" 10 gdb调试")]),t._v(" "),n("h2",{attrs:{id:"_10-1-命令介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-命令介绍"}},[t._v("#")]),t._v(" 10.1 命令介绍")]),t._v(" "),n("p",[t._v("gdb脚本基于gdb命令实现，可在虚拟机和设备上直接运行。使用此脚本可批量对多个进程执行给定命令，也可以调试-i指定的非进程。")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("命令")]),t._v(" "),n("th",[t._v("gdb")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("命令格式")]),t._v(" "),n("td",[t._v("gdb [-s|-p] [-w] [-F 'SEPERATOR'] [-i '_PIDS'] [-e '_PIDS'] -c|-f 'CMD_ARGS'")])]),t._v(" "),n("tr",[n("td",[t._v("参数说明")]),t._v(" "),n("td",[t._v("-s 串行执行CMD（依次对每个执行CMD；默认选项） -p 并行执行CMD（同时对每个执行CMD） -w 等待所有上都执行CMD完毕，否则任意执行完CMD都将停止其他上的执行（仅对-p有效） -i 使用指定的 pids（多个pid以空格分隔），若不指定则自动扫描所有进程 -e 剔除指定的 pids（多个pid以空格分隔） -c 命令列表（多条命令以';'或-F指定的分隔符进行分隔） -f 命令文件（对于带有分支、循环等复杂控制的多条命令，推荐采用命令文件形式） -F 命令列表中的分隔符（默认为';'）")])])])]),t._v(" "),n("h2",{attrs:{id:"_10-2-使用示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-使用示例"}},[t._v("#")]),t._v(" 10.2 使用示例")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("获取mempool状态。（PID应为master或nae的pid）")]),t._v(" "),n("p",[t._v("gdb -c 'call rte_mempool_list_dump(stdout)' -i <PID>")]),t._v(" "),n("p",[t._v("gdb -c 'call cfg_callback_test_coredump(0,0)' -i $pid")]),t._v(" "),n("p",[t._v("gdb -c '' -i $pid")])]),t._v(" "),n("li",[n("p",[t._v("临时在指定位置添加打印函数。")]),t._v(" "),n("p",[t._v("gdb -p -c 'b test.c:45; commands; echo ----will bug_on----\\n; bt; c; end; c'")])]),t._v(" "),n("li",[n("p",[t._v("验证RCU是否执行session释放。")]),t._v(" "),n("p",[t._v("gdb -p -c 'handle all noprint nostop; b _free_mobj if mid==session_mobj; commands; info thread; bt; end; c'")])]),t._v(" "),n("li",[n("p",[t._v("显示所有进程的calltrace信息及本地变量。")]),t._v(" "),n("p",[t._v("说明：对于多、无断点场景下的私有数据、状态，可串行顺序执行。")]),t._v(" "),n("p",[t._v("gdb -c 'bt full'")])]),t._v(" "),n("li",[n("p",[t._v("显示所有进程/线程的calltrace信息。（类似于tdb的info state）")])])]),t._v(" "),n("p",[t._v("说明：对于多、无断点场景下的私有数据、状态，可串行顺序执行。")]),t._v(" "),n("p",[t._v("gdb -c 'thread apply all bt'")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("查看每个进程的私有全局变量engine_id、session_local，并打印CallTrace。")]),t._v(" "),n("p",[t._v("gdb -c 'p engine_id; p/x *session_local; bt'")])]),t._v(" "),n("li",[n("p",[t._v("对指定进程11662，在其neigh.c:1235行的BUG_ON(1)处设置断点，生成core文件。")]),t._v(" "),n("p",[t._v("说明：这种方式生成的core文件不同于由内核生成的/SE/core--PID，它含有共享内存的绝大部分数据，便于深入分析。须注意的是这种core文件一般较大，可能达到几个GB，因此要保证足够的存储空间；存储可能需要十几秒或几十秒。若不指定文件名，则在当前目录下生成名为core.PID的core文件（此时可提前cd到/SE下）。")]),t._v(" "),n("p",[t._v("gdb -c 'b neigh.c:1235; commands; silent; gcore /home/luo/workspace/core-neigh.11662; c; end; c' -i 11662")])]),t._v(" "),n("li",[n("p",[t._v("对指定进程11662，在其ut函数处设置断点，每个报文到来则打印tbuf信息。")])])]),t._v(" "),n("p",[t._v("说明：对单个进程，不存在串行/并行的区别，可按串行处理。")]),t._v(" "),n("p",[t._v("gdb -c 'b ut; commands; silent; p/x *tbuf; c; end; c' -i 11662")]),t._v(" "),n("ol",[n("li",[t._v("打开分片重组部分的调试开关debug_ip4_frag_recv、debug_ip4_mtu_send。")])]),t._v(" "),n("p",[t._v("说明：这两个变量都为共享数据，只需设置单个即可，如pid为11662。")]),t._v(" "),n("p",[t._v("gdb -c 'set debug_ip4_frag_recv=1; set debug_ip4_mtu_send=1; printf \"recv=%d,send=%d\",debug_ip4_frag_recv,debug_ip4_mtu_send' -i 11662")]),t._v(" "),n("ol",[n("li",[t._v("对所有进程设置条件指令断点，触发后执行指定命令，执行命令后继续执行不退出。")])]),t._v(" "),n("p",[t._v("说明：对于涉及多的有断点场景，应使用并行模式。")]),t._v(" "),n("p",[t._v("gdb -p -c 'b test.c:22 if cnt%6==4; commands; silent; echo --trace--\\n; bt; printf \"\\nname=%s cnt=%d\\n\", name, cnt; c; end; c'")]),t._v(" "),n("p",[t._v("该命令序列也可写入命令文件：（-f /tmp/a.gdb）")]),t._v(" "),n("p",[t._v("handle all noprint nostop")]),t._v(" "),n("p",[t._v("b test.c:22 if cnt%6==4")]),t._v(" "),n("p",[t._v("commands")]),t._v(" "),n("p",[t._v("silent")]),t._v(" "),n("p",[t._v("echo --trace--\\n")]),t._v(" "),n("p",[t._v("bt")]),t._v(" "),n("p",[t._v('printf "\\nname=%s cnt=%d\\n", name, cnt')]),t._v(" "),n("p",[t._v("c")]),t._v(" "),n("p",[t._v("end")]),t._v(" "),n("p",[t._v("c")]),t._v(" "),n("p",[t._v("[注]：最后的c命令，使得设完断点及commands后继续运行，倒数第二条c命令，使得断点触发/处理后仍继续运行。")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("对所有进程设置数据断点，当数值被改变时，打印CallTrace。")]),t._v(" "),n("p",[t._v("说明：watch可监控数据是否被改变，rwatch可监控数据是否被读取，awatch包括这两类。")]),t._v(" "),n("p",[t._v("gdb -p -c 'watch st.age; commands; bt; end; c; c'")])]),t._v(" "),n("li",[n("p",[t._v("对每个设置多个断点，每个断点触发时打印CallTrace及文件/函数/行信息。")]),t._v(" "),n("p",[t._v("说明：每个断点对应自己的触发处理，此处采用了自定义命令hit_me的方式。")]),t._v(" "),n("p",[t._v("gdb -p -f /tmp/b.gdb")]),t._v(" "),n("p",[t._v("handle all noprint nostop")]),t._v(" "),n("p",[t._v("define hit_me")]),t._v(" "),n("p",[t._v("echo \\n>>>hit_me>>>\\n")]),t._v(" "),n("p",[t._v("bt")]),t._v(" "),n("p",[t._v("info thread")]),t._v(" "),n("p",[t._v("end")]),t._v(" "),n("p",[t._v("b test.c:24")]),t._v(" "),n("p",[t._v("commands")]),t._v(" "),n("p",[t._v("hit_me")]),t._v(" "),n("p",[t._v("c")]),t._v(" "),n("p",[t._v("end")]),t._v(" "),n("p",[t._v("b test.c:36")]),t._v(" "),n("p",[t._v("commands")]),t._v(" "),n("p",[t._v("hit_me")]),t._v(" "),n("p",[t._v("c")]),t._v(" "),n("p",[t._v("end")]),t._v(" "),n("p",[t._v("c")])]),t._v(" "),n("li",[n("p",[t._v("查看phy_dev[]中ifindex为26的结构体。")]),t._v(" "),n("p",[t._v("说明：phy_dev为共享数据，因此只需查看单个即可，如pid为11662。命令序列略繁，可写入命令文件。")]),t._v(" "),n("p",[t._v("gdb -f /tmp/dev.gdb -i 11662")]),t._v(" "),n("p",[t._v("脚本/tmp/dev.gdb内容如下：")]),t._v(" "),n("p",[t._v("handle all noprint nostop")]),t._v(" "),n("p",[t._v("set print pretty")]),t._v(" "),n("p",[t._v("set $idx=26")]),t._v(" "),n("p",[t._v("set $i=0")]),t._v(" "),n("p",[t._v("while ($i<256)")]),t._v(" "),n("p",[t._v("set $d = (struct dev*)phy_dev[$i]")]),t._v(" "),n("p",[t._v("if ($d == 0)")]),t._v(" "),n("p",[t._v("loop_break")]),t._v(" "),n("p",[t._v("end")]),t._v(" "),n("p",[t._v("if ($d->ifindex==$idx)")]),t._v(" "),n("p",[t._v("p/x *$d")]),t._v(" "),n("p",[t._v("loop_break")]),t._v(" "),n("p",[t._v("end")]),t._v(" "),n("p",[t._v("set $i = $i+1")]),t._v(" "),n("p",[t._v("end")])]),t._v(" "),n("li",[n("p",[t._v("查看挂接在链表mirror_filter_list上的每个filter节点。")])])]),t._v(" "),n("p",[t._v("说明：mirror_filter_list为共享数据，因此只需查看单个即可，如pid为11662。")]),t._v(" "),n("p",[t._v("gdb -f /tmp/mirror_filter.gdb -i 11662")]),t._v(" "),n("p",[t._v("脚本mirror_filter.gdb内容如下：")]),t._v(" "),n("p",[t._v("handle all noprint nostop")]),t._v(" "),n("p",[t._v("set print pretty")]),t._v(" "),n("p",[t._v("p/x &mirror_filter_list")]),t._v(" "),n("p",[t._v("set $f=mirror_filter_list.next")]),t._v(" "),n("p",[t._v("while (1)")]),t._v(" "),n("p",[t._v("if ($f==&mirror_filter_list)")]),t._v(" "),n("p",[t._v("echo [end of list]")]),t._v(" "),n("p",[t._v("loop_break")]),t._v(" "),n("p",[t._v("end")]),t._v(" "),n("p",[t._v("p/x *(struct mirror_filter_t*)$f")]),t._v(" "),n("p",[t._v("set $f=((struct list_head*)$f)->next")]),t._v(" "),n("p",[t._v("end")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("获取进程core大小限制。")]),t._v(" "),n("p",[t._v("gdb -c 'p getrlimit(4,$rsp-32); x/2xg $rsp-32'")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);